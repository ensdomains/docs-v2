(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2871],{7459:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dao/proposals/3.3",function(){return s(7796)}])},7796:function(e,n,s){"use strict";s.r(n),s.d(n,{__N_SSG:function(){return r}});var t=s(1527),c=s(313);function d(e){let n=Object.assign({h1:"h1",table:"table",thead:"thead",tr:"tr",th:"th",strong:"strong",tbody:"tbody",td:"td",a:"a",h2:"h2",p:"p",ol:"ol",li:"li",code:"code",pre:"pre",ul:"ul"},(0,c.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{children:"[EP3.3] [Executable] Sell ETH to USDC"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:(0,t.jsx)(n.strong,{children:"Status"})}),(0,t.jsx)(n.th,{children:"Executed"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Discussion Thread"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://discuss.ens.domains/t/ep3-3-executable-sell-eth-into-usdc/15906",children:"Discuss"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Votes"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://www.tally.xyz/gov/ens/proposal/45461903078948131870051132081249892009497709518413744958551889217805827301425",children:"Tally"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Author"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://twitter.com/blockchainjames",children:"James.eth"})})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"abstract",children:"Abstract"}),"\n",(0,t.jsx)(n.p,{children:"This proposal executes a swap of 10,000 ETH into USDC, to ensure ENS DAO has enough to cover operating expenses for 18 - 24 months."}),"\n",(0,t.jsx)(n.h2,{id:"motivation",children:"Motivation"}),"\n",(0,t.jsx)(n.p,{children:"The DAO currently keeps almost 100% of its spendable treasury in ETH. While ENS generates protocol revenue in ETH, having so much exposure to a single volatile asset places the DAO in a vulnerable position."}),"\n",(0,t.jsx)(n.p,{children:"This is a proposal to convert 10,000 ETH into USDC through a Cowswap swap."}),"\n",(0,t.jsx)(n.p,{children:"10,000 ETH is approximately 25% of the total amount of ETH held by the ENS DAO (wallet.ensdao.eth) and register controller (controller.ens.eth) as of January 18, 2023."}),"\n",(0,t.jsx)(n.p,{children:"It is hoped that this sale will generate in excess of $13m in USDC. The goal is to ensure that the DAO has enough USDC to cover operations for the next 18 - 24 months."}),"\n",(0,t.jsx)(n.h2,{id:"specification",children:"Specification"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Call ",(0,t.jsx)(n.code,{children:"withdraw()"})," on controller.ens.eth (0x283af0b28c62c092c9727f1ee09c02ca627eb7f5)"]}),"\n",(0,t.jsxs)(n.li,{children:["Call ",(0,t.jsx)(n.code,{children:"deposit()"})," on WETH9 (0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2), sending 10,000 ETH"]}),"\n",(0,t.jsxs)(n.li,{children:["Call ",(0,t.jsx)(n.code,{children:"approve(<milkman>, 10000 ETH)"})," on WETH9 (0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2)"]}),"\n",(0,t.jsxs)(n.li,{children:["Call ",(0,t.jsx)(n.code,{children:"requestSwapExactTokensForTokens(10000 ETH, <WETH9>, <USDC>, wallet.ensdao.eth, <uniswap v3 price checker>, <price checker data>)"})," on milkman (0x11C76AD590ABDFFCD980afEC9ad951B160F02797)"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Price checker data is configured to check the swap against the Uniswap v3 pool and limit to 2% slippage. It is generated using the below code:"}),"\n",(0,t.jsx)(n.pre,{code:'import { ethers } from "https://cdn.ethers.io/lib/ethers-5.2.esm.min.js";\n\nfunction getCheckerData(slippage, path, fees) {\n  return ethers.utils.defaultAbiCoder.encode(\n    ["uint256", "bytes"],\n    [\n      slippage,\n      ethers.utils.defaultAbiCoder.encode(\n        ["address[]", "uint24[]"],\n        [path, fees],\n      ),\n    ],\n  );\n}\n\nconst checkerData = getCheckerData(\n  200,\n  [\n    "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",\n    "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",\n  ],\n  [5],\n);\nconsole.log("checkerData:", checkerData);\n',children:(0,t.jsx)(n.code,{children:'import { ethers } from "https://cdn.ethers.io/lib/ethers-5.2.esm.min.js";\n\nfunction getCheckerData(slippage, path, fees) {\n  return ethers.utils.defaultAbiCoder.encode(\n    ["uint256", "bytes"],\n    [\n      slippage,\n      ethers.utils.defaultAbiCoder.encode(\n        ["address[]", "uint24[]"],\n        [path, fees],\n      ),\n    ],\n  );\n}\n\nconst checkerData = getCheckerData(\n  200,\n  [\n    "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",\n    "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",\n  ],\n  [5],\n);\nconsole.log("checkerData:", checkerData);\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Addresses:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"0xfe89cc7abb2c4183683ab71653c4cdc9b02d44b7 - wallet.ensdao.eth"}),"\n",(0,t.jsx)(n.li,{children:"0x283af0b28c62c092c9727f1ee09c02ca627eb7f5 - controller.ens.eth"}),"\n",(0,t.jsx)(n.li,{children:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2 - WETH9"}),"\n",(0,t.jsx)(n.li,{children:"0x11C76AD590ABDFFCD980afEC9ad951B160F02797 - milkman"}),"\n",(0,t.jsx)(n.li,{children:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48 - USDC"}),"\n",(0,t.jsx)(n.li,{children:"0x2F965935f93718bB66d53a37a97080785657f0AC - Uniswap v3 slippage checker"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"transactions",children:"Transactions"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Address"}),(0,t.jsx)(n.th,{children:"Value"}),(0,t.jsx)(n.th,{children:"Function"}),(0,t.jsx)(n.th,{children:"Argument"}),(0,t.jsx)(n.th,{children:"Value"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"0x283Af0B28c62C092C9727F1Ee09c02CA627EB7F5"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"withdraw"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2"}),(0,t.jsx)(n.td,{children:"10000 ETH"}),(0,t.jsx)(n.td,{children:"deposit"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"approve"}),(0,t.jsx)(n.td,{children:"guy"}),(0,t.jsx)(n.td,{children:"0x11C76AD590ABDFFCD980afEC9ad951B160F02797"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"wad"}),(0,t.jsx)(n.td,{children:"10000000000000000000000"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"0x11C76AD590ABDFFCD980afEC9ad951B160F02797"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"requestSwapExactTokensForTokens"}),(0,t.jsx)(n.td,{children:"amountIn"}),(0,t.jsx)(n.td,{children:"10000000000000000000000"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"fromToken"}),(0,t.jsx)(n.td,{children:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"toToken"}),(0,t.jsx)(n.td,{children:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"to"}),(0,t.jsx)(n.td,{children:"0xfe89cc7abb2c4183683ab71653c4cdc9b02d44b7"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"priceChecker"}),(0,t.jsx)(n.td,{children:"0x2F965935f93718bB66d53a37a97080785657f0AC"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"priceCheckerData"}),(0,t.jsx)(n.td,{children:"0x00000000000000000000000000000000000000000000000000000000000000c8000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb4800000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000005"})]})]})]})]})}var r=!0;n.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,c.ah)(),e.components);return n?(0,t.jsx)(n,Object.assign({},e,{children:(0,t.jsx)(d,e)})):d(e)}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=7459)}),_N_E=e.O()}]);