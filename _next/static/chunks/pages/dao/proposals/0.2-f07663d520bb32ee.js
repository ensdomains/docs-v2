(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7677],{3910:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dao/proposals/0.2",function(){return n(1700)}])},1700:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return a}});var s=n(1527),r=n(313);function i(e){let t=Object.assign({h1:"h1",table:"table",thead:"thead",tr:"tr",th:"th",strong:"strong",tbody:"tbody",td:"td",a:"a",p:"p",em:"em",h2:"h2",code:"code",ol:"ol",li:"li"},(0,r.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{children:"[EP0.2] [Executable] Retrospective airdrop for accounts that owned another accountâ€™s primary ENS 1"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:(0,s.jsx)(t.strong,{children:"Status"})}),(0,s.jsx)(t.th,{children:"Executed"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Discussion Thread"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.a,{href:"https://discuss.ens.domains/t/ep2-executable-retrospective-airdrop-for-accounts-that-owned-another-accounts-primary-ens-name/6755",children:"Discuss"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Votes"})}),(0,s.jsx)(t.td,{children:(0,s.jsxs)("p",{children:[(0,s.jsx)("a",{href:"https://snapshot.org/#/ens.eth/proposal/0xcf77c74696cab1d939936ae8684c0007297bed641f60896ad186354f036d725f",children:"Snapshot"})," passed on 2021-12-06",(0,s.jsx)("br",{}),(0,s.jsx)("a",{href:"https://www.withtally.com/governance/ens/proposal/90476529665364161211265365238121921179703522228680648046371476645353679539653",children:"Onchain"})," passed on 2022-01-12"]})})]})]})]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.em,{children:"Note: This was previously numbered EP2."})}),"\n",(0,s.jsx)(t.h2,{id:"abstract",children:"Abstract"}),"\n",(0,s.jsx)(t.p,{children:"One of the criteria used for the ENS airdrop was whether the account had a primary ENS name set. Those accounts that did got a 2x multiplier on their airdrop amount. The intention was to use this as a measure of involvement in the ENS ecosystem; those accounts that set primary ENS names are typically using their names in supported applications, while those that don't are less likely to be doing so."}),"\n",(0,s.jsx)(t.p,{children:"The way this was implemented was to award the multiplier to all accounts that had interacted with the reverse registrar. This had the unintended side effect that if a user owned an ENS name on account A, and configured it to resolve to account B, which used it as its primary name, account A would get tokens, and account B would get the multiplier. As B doesn't own any names, the multiplier has no effect and the end result is that some users got fewer tokens than they would have if they had used the same account for everything."}),"\n",(0,s.jsx)(t.p,{children:"This proposal aims to correct this, by introducing a new criteria for determining who to award the multiplier to, and creating a new airdrop contract for all accounts that qualify for the new criteria but not the old one."}),"\n",(0,s.jsx)(t.p,{children:"In plain english terms, the new criteria is that the account must have at some point in time owned a name that was used as the primary ENS name for an account."}),"\n",(0,s.jsxs)(t.p,{children:["More formally, for each account ",(0,s.jsx)(t.code,{children:"a"}),", the account is assigned the multiplier if there exists a name ",(0,s.jsx)(t.code,{children:"n"})," and a time before 2021-11-01 00:00:00 UTC, where all of the following are true:"]}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"a"})," is the registrant of ",(0,s.jsx)(t.code,{children:"n"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"n"})," has a resolver, ",(0,s.jsx)(t.code,{children:"r"}),", set on the ENS registry."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"r"})," has an ",(0,s.jsx)(t.code,{children:"addr"})," record, ",(0,s.jsx)(t.code,{children:"a'"}),", set for ",(0,s.jsx)(t.code,{children:"n"}),", and has emitted an ",(0,s.jsx)(t.code,{children:"AddrChanged"})," event to record this fact."]}),"\n",(0,s.jsxs)(t.li,{children:["The reverse record for ",(0,s.jsx)(t.code,{children:"a'"})," has a resolver, ",(0,s.jsx)(t.code,{children:"r'"}),", set on the ENS registry."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"r'"})," has a ",(0,s.jsx)(t.code,{children:"name"})," record, ",(0,s.jsx)(t.code,{children:"n'"}),", set for the reverse record of ",(0,s.jsx)(t.code,{children:"a"}),". ",(0,s.jsx)(t.code,{children:"r'"})," is either the default reverse resolver, or has emitted a ",(0,s.jsx)(t.code,{children:"NameChanged"})," event for ",(0,s.jsx)(t.code,{children:"n'"})," and ",(0,s.jsx)(t.code,{children:"a'"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"n == n'"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["This logic is implemented by ",(0,s.jsx)(t.a,{href:"https://gist.github.com/Arachnid/667178e854945abaecb6dfd3b6c0c279/106d9bc156988cf96786c71f6448f13fb11599fc",children:"this series of BigQuery queries"}),", and shows that 1,969 accounts meet these criteria but did not qualify for the multiplier under the original criteria. The sum of the tokens these accounts would be entitled to comes to ~213,049 ENS tokens. A list of affected accounts and balances is ",(0,s.jsx)(t.a,{href:"https://gist.github.com/Arachnid/e8b1a18fc19818fb00f51fbb8d90e429",children:"here"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["Further, a number of users have accidentally transferred their ENS tokens to the token contract, totalling 6,246 contracts across 49 transfers. These tokens should be returned to their previous owners. This proposal, if executed, will transfer 219,295 ENS tokens to ",(0,s.jsx)(t.a,{href:"https://github.com/ensdomains/governance/pull/9",children:"a new merkle airdrop contract "}),"allowing affected users to claim them."]}),"\n",(0,s.jsx)(t.h2,{id:"specification",children:"Specification"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Request that True Names Limited write and deploy a contract that allows claiming of tokens via Merkle Proofs using the same methodology as was used for the airdrop."}),"\n",(0,s.jsx)(t.li,{children:"Request that True Names Limited make changes to the claim.ens.domains site to support claiming this additional airdrop for qualifying accounts."}),"\n",(0,s.jsx)(t.li,{children:"Authorise the contract deployed in (1) to spend 219295650978169915391391 base ENS tokens from the ENS DAO account."}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"code",children:"Code"})]})}var a=!0;t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:t}=Object.assign({},(0,r.ah)(),e.components);return t?(0,s.jsx)(t,Object.assign({},e,{children:(0,s.jsx)(i,e)})):i(e)}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=3910)}),_N_E=e.O()}]);