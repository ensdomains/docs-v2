(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7768],{5669:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/contract-api-reference/eth-permanent-registrar/README",function(){return n(4858)}])},4858:function(e,r,n){"use strict";n.r(r);var t=n(4637),i=n(6988),o=n(1177),a=n(2370),s=function(e){return(0,o.withSSG)((0,i.Z)({filename:"README.mdx",route:"/contract-api-reference/eth-permanent-registrar/README",meta:{},pageMap:[{name:"README",route:"/README"},{name:"SUMMARY",route:"/SUMMARY"},{name:"bug-bounty-program",route:"/bug-bounty-program"},{name:"contract-api-reference",children:[{name:"ENS-Contracts-Overview",route:"/contract-api-reference/ENS-Contracts-Overview"},{name:"dns-registrar",route:"/contract-api-reference/dns-registrar"},{name:"ens",route:"/contract-api-reference/ens",frontMatter:{description:"The ENS registry."}},{name:"eth-permanent-registrar",children:[{name:"README",route:"/contract-api-reference/eth-permanent-registrar/README"},{name:"controller",route:"/contract-api-reference/eth-permanent-registrar/controller"},{name:"registrar",route:"/contract-api-reference/eth-permanent-registrar/registrar"}],route:"/contract-api-reference/eth-permanent-registrar"},{name:"name-processing",route:"/contract-api-reference/name-processing",frontMatter:{description:"Describes how to normalize and hash ENS names."}},{name:"publicresolver",route:"/contract-api-reference/publicresolver",frontMatter:{description:"The default public resolver."}},{name:"reverseregistrar",route:"/contract-api-reference/reverseregistrar",frontMatter:{description:"The registrar responsible for managing reverse resolution via the .addr.reverse special-purpose TLD."}},{name:"testregistrar",route:"/contract-api-reference/testregistrar"}],route:"/contract-api-reference"},{name:"contract-developer-guide",children:[{name:"resolving-names-on-chain",route:"/contract-developer-guide/resolving-names-on-chain"},{name:"writing-a-registrar",route:"/contract-developer-guide/writing-a-registrar"},{name:"writing-a-resolver",route:"/contract-developer-guide/writing-a-resolver"}],route:"/contract-developer-guide"},{name:"dapp-developer-guide",children:[{name:"ens-as-nft",route:"/dapp-developer-guide/ens-as-nft"},{name:"ens-enabling-your-dapp",route:"/dapp-developer-guide/ens-enabling-your-dapp"},{name:"ens-l2-offchain",route:"/dapp-developer-guide/ens-l2-offchain"},{name:"ens-libraries",route:"/dapp-developer-guide/ens-libraries"},{name:"front-end-design-guidelines",route:"/dapp-developer-guide/front-end-design-guidelines",frontMatter:{description:"ENS is a tool to simplify the experience for your users. Here are a series of guidelines and tools that will help you make design choices and implement the best ENS user experience."}},{name:"managing-names",route:"/dapp-developer-guide/managing-names"},{name:"registering-and-renewing-names",route:"/dapp-developer-guide/registering-and-renewing-names"},{name:"resolving-names",route:"/dapp-developer-guide/resolving-names"},{name:"working-with-ens",route:"/dapp-developer-guide/working-with-ens"}],route:"/dapp-developer-guide"},{name:"deploying-ens-on-a-private-chain",route:"/deploying-ens-on-a-private-chain"},{name:"developer",children:[{name:"index",route:"/developer"},{name:"meta.json",meta:{index:{title:"Developer Documentation",type:"docs",theme:{}}},locale:"en-US"}],route:"/developer"},{name:"dns-registrar-guide",route:"/dns-registrar-guide"},{name:"ens-deployments",route:"/ens-deployments"},{name:"ens-improvement-proposals",children:[{name:"README",route:"/ens-improvement-proposals/README",frontMatter:{description:"Standards documentation describing the ENS protocol"}},{name:"ensip-1-ens",route:"/ens-improvement-proposals/ensip-1-ens",frontMatter:{description:"Documentation of the basic ENS protocol (formerly EIP-137)."}},{name:"ensip-10-wildcard-resolution",route:"/ens-improvement-proposals/ensip-10-wildcard-resolution",frontMatter:{description:"Provides a mechanism to support wildcard resolution of ENS names (formerly EIP-2544)."}},{name:"ensip-11-evmchain-address-resolution",route:"/ens-improvement-proposals/ensip-11-evmchain-address-resolution",frontMatter:{description:"Introduces coinType for EVM compatible chains (amending ENSIP9)."}},{name:"ensip-12-avatar-text-records",route:"/ens-improvement-proposals/ensip-12-avatar-text-records",frontMatter:{description:"A standard for storage of the avatar text record in ENS."}},{name:"ensip-2-initial-hash-registrar",route:"/ens-improvement-proposals/ensip-2-initial-hash-registrar",frontMatter:{description:"Describes the hash registrar initially used to register ENS .eth domains (formerly EIP-162)."}},{name:"ensip-3-reverse-resolution",route:"/ens-improvement-proposals/ensip-3-reverse-resolution",frontMatter:{description:"Specifies a TLD, registrar, and resolver interface for reverse resolution of Ethereum addresses using ENS (formerly EIP-181)."}},{name:"ensip-4-support-for-contract-abis",route:"/ens-improvement-proposals/ensip-4-support-for-contract-abis",frontMatter:{description:"A mechanism for storing ABI definitions in ENS, for easy lookup of contract interfaces by callers (formerly EIP-205)."}},{name:"ensip-5-text-records",route:"/ens-improvement-proposals/ensip-5-text-records",frontMatter:{description:"A standard for storage of text records in ENS (formerly EIP-634)."}},{name:"ensip-6-dns-in-ens",route:"/ens-improvement-proposals/ensip-6-dns-in-ens",frontMatter:{description:"Defines a resolver profile for ENS that provides features for storage and lookup of DNS records (formerly EIP-1185)."}},{name:"ensip-7-contenthash-field",route:"/ens-improvement-proposals/ensip-7-contenthash-field",frontMatter:{description:"Introduces a field for storing content addresses and hashes in ENS (formerly EIP-1577)."}},{name:"ensip-8-interface-discovery",route:"/ens-improvement-proposals/ensip-8-interface-discovery",frontMatter:{description:"Defines a method of associating contract interfaces with ENS names and addresses, and of discovering those interfaces (formerly EIP-1844)."}},{name:"ensip-9-multichain-address-resolution",route:"/ens-improvement-proposals/ensip-9-multichain-address-resolution",frontMatter:{description:"Introduces new overloads for the `addr` field for ENS resolvers, which permit resolution of addresses for other blockchains via ENS (formerly EIP-2304)."}}],route:"/ens-improvement-proposals"},{name:"ens-migration-february-2020",children:[{name:"guide-for-dapp-developers",route:"/ens-migration-february-2020/guide-for-dapp-developers"},{name:"technical-description",route:"/ens-migration-february-2020/technical-description"}],route:"/ens-migration-february-2020"},{name:"frequently-asked-questions",route:"/frequently-asked-questions"},{name:"governance",children:[{name:"index",route:"/governance"},{name:"meta.json",meta:{index:{title:"Governance Documentation",type:"docs",theme:{}}},locale:"en-US"}],route:"/governance"},{name:"index",route:"/",frontMatter:{title:"Welcome"}},{name:"meta.json",meta:{index:{title:"Introduction",type:"docs",hidden:!0,theme:{}},governance:{title:"Governance",type:"nav"},user:{title:"User",type:"nav"},developer:{title:"Developer",type:"nav"},technical:{title:"Technical",type:"nav"}},locale:"en-US"},{name:"permanent-registrar-faq",route:"/permanent-registrar-faq"},{name:"technical",children:[{name:"index",route:"/technical"},{name:"meta.json",meta:{index:{title:"Technical Documentation",type:"docs",theme:{}}},locale:"en-US"}],route:"/technical"},{name:"terminology",route:"/terminology"},{name:"user",children:[{name:"index",route:"/user"},{name:"meta.json",meta:{index:{title:"User Documentation",type:"docs",theme:{}}},locale:"en-US"}],route:"/user"}]},a.Z))(e)};function c(e){var r=Object.assign({h1:"h1",p:"p",h2:"h2",a:"a",ul:"ul",li:"li",code:"code",ol:"ol"},e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.h1,{children:".eth Permanent Registrar"}),"\n",(0,t.jsx)(r.p,{children:"The Permanent Registrar is the code that will govern allocation and renewal of names in the .eth TLD."}),"\n",(0,t.jsx)(r.h2,{children:"System architecture"}),"\n",(0,t.jsxs)(r.p,{children:["Code for the permanent registrar can be found in the ",(0,t.jsx)(r.a,{href:"https://github.com/ensdomains/ethregistrar",children:"ethregistrar"})," repository."]}),"\n",(0,t.jsxs)(r.p,{children:["The registrar itself is called ",(0,t.jsx)(r.a,{href:"registrar.md",children:"BaseRegistrar"}),". This contract implements several key functions:"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"The owner of the registrar may add and remove 'controllers'."}),"\n",(0,t.jsx)(r.li,{children:"Controllers may register new domains and extend the expiry of (renew) existing domains. They can not change the ownership or reduce the expiration time of existing domains."}),"\n",(0,t.jsx)(r.li,{children:"Name owners may transfer ownership to another address."}),"\n",(0,t.jsx)(r.li,{children:"Name owners may reclaim ownership in the ENS registry if they have lost it."}),"\n",(0,t.jsx)(r.li,{children:"Owners of names in the legacy registrar may transfer them to the new registrar, during the 1 year transition period. When they do so, their deposit is returned to them in its entirety."}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:["In addition, the registrar is an ",(0,t.jsx)(r.a,{href:"https://github.com/ensdomains/ens/blob/master/docs/ethregistrar.rst#id3",children:"ERC721"})," compliant nonfungable token contract, meaning that .eth registrations can be transferred in the same fashion as other NFTs."]}),"\n",(0,t.jsx)(r.p,{children:"Users will interact directly with this contract when transferring ownership of names, or recovering ownership in the ENS registry of a name (for example, one whose ownership was previously transferred to a contract). Users can also query names to see their registration status and expiry date. For initial registration and for renewals, users will need to interact with a controller contract."}),"\n",(0,t.jsx)(r.p,{children:"This separation of concerns reduces the attack surface for the registrar, and provides users with guarantees of continued ownership of a name so long as the registrar is in place. Simultaneously, it provides for improvement and innovation over registration and renewal mechanisms. A future update may transfer ownership of the root and the .eth TLD to a contract with restricted permissions, thus preventing even the root keyholders from modifying a .eth registraion, while still providing for future updates to the set of controllers."}),"\n",(0,t.jsxs)(r.p,{children:["Initially, one controller is implemented, the ",(0,t.jsx)(r.a,{href:"controller.md",children:"ETHRegistrarController"}),". This controller provides a straightforward registration and renewal mechanism for domains that are 7 or more characters long, implementing the following functionality:"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"The owner of the controller may set a price oracle contract, which determines the cost of registrations and renewals based on the name and the desired registration or renewal duration."}),"\n",(0,t.jsx)(r.li,{children:"The owner of the controller may withdraw any collected funds to their account."}),"\n",(0,t.jsx)(r.li,{children:"Users can register new names using a commit/reveal process and by paying the appropriate registration fee."}),"\n",(0,t.jsx)(r.li,{children:"Users can renew a name by paying the appropriate fee. Any user may renew a domain, not just the name's owner. There is no limit on renewal duration."}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"By allowing anyone to renew a domain, users concerned with the longevity of a name they interact with can ensure it remains registered by paying for the registration themselves, if necessary."}),"\n",(0,t.jsx)(r.p,{children:"By allowing renewal for arbitrarily long periods of time, users can 'lock in' a desirable registration fee. Names can be made effectively 'immortal' by renewing for a long period, ensuring that stability of the name can be guaranteed by smart contract."}),"\n",(0,t.jsxs)(r.p,{children:["Initially, a single pricing oracle was deployed, the ",(0,t.jsx)(r.a,{href:"https://github.com/ensdomains/ethregistrar/blob/master/contracts/StablePriceOracle.sol",children:"StablePriceOracle"}),". This contract permits its owner to set prices in USD for each permitted name length, and uses a USD:ETH price oracle to convert those prices into Ether at the current rate. Users will not have to interact with this oracle directly, as the controller provides functionality to determine pricing for a candidate name registration or renewal."]}),"\n",(0,t.jsx)(r.h2,{children:"Discovery"}),"\n",(0,t.jsxs)(r.p,{children:["Finding the address of the new registrar is straightforward: look up the owner of the domain 'eth' in ENS, by calling ",(0,t.jsx)(r.code,{children:"owner(namehash('eth'))"})," on the ENS registry."]}),"\n",(0,t.jsxs)(r.p,{children:["In order to support discovering the address of the controller, ENS supports interface discovery via ",(0,t.jsx)(r.a,{href:"https://eips.ethereum.org/EIPS/eip-1844",children:"EIP 1844"}),". This mechanism permits looking up the address of the contract that implements a required interface via the following process:"]}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:["Set ",(0,t.jsx)(r.code,{children:"node = namehash('eth')"}),"."]}),"\n",(0,t.jsxs)(r.li,{children:["Look up the ENS resolver by calling ",(0,t.jsx)(r.code,{children:"resolver(node)"})," on the ENS registry."]}),"\n",(0,t.jsxs)(r.li,{children:["Call the ",(0,t.jsx)(r.code,{children:"interfaceImplementer(node, interfaceId)"})," method on that resolver, where ",(0,t.jsx)(r.code,{children:"interfaceId"})," is the ",(0,t.jsx)(r.a,{href:"https://eips.ethereum.org/EIPS/eip-165",children:"EIP 165"})," interface ID of the interface you need."]}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"The following interface IDs are presently defined for the .eth permanent registrar:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"0x6ccb2df4"}),", the interface ID for ",(0,t.jsx)(r.a,{href:"https://eips.ethereum.org/EIPS/eip-721",children:"ERC721"})," (NFTs). This returns the address of the registrar itself (which can also be fetched by doing an address lookup, or by looking up the owner of '.eth'."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"0x018fac06"}),", the interface ID for the controller. Returns the controller's address."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"0x7ba18ba1"}),", the interface ID for the legacy registrar's migration function. Returns the legacy registrar's address."]}),"\n"]})]})}r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.jsx)(s,Object.assign({},e,{children:(0,t.jsx)(c,e)}))}}},function(e){e.O(0,[8164,3248,9774,2888,179],(function(){return r=5669,e(e.s=r);var r}));var r=e.O();_N_E=r}]);