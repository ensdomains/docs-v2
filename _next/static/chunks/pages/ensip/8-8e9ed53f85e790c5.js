(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4353],{4810:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ensip/8",function(){return n(3280)}])},3280:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return a}});var s=n(1527),i=n(313);function r(e){let t=Object.assign({h1:"h1",table:"table",thead:"thead",tr:"tr",th:"th",strong:"strong",a:"a",tbody:"tbody",td:"td",h2:"h2",p:"p",pre:"pre",code:"code",ol:"ol",li:"li"},(0,i.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{children:"ENSIP-8: Interface Discovery"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:(0,s.jsx)(t.strong,{children:"Author"})}),(0,s.jsxs)(t.th,{children:["Nick Johnson <",(0,s.jsx)(t.a,{href:"mailto:nick@ens.domains",children:"nick@ens.domains"}),">"]})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Status"})}),(0,s.jsx)(t.td,{children:"Final"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Submitted"})}),(0,s.jsx)(t.td,{children:"2019-03-05"})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"abstract",children:"Abstract"}),"\n",(0,s.jsx)(t.p,{children:"This ENSIP specifies a method for exposing interfaces associated with an ENS name or an address (typically a contract address) and allowing applications to discover those interfaces and interact with them. Interfaces can be implemented either by the target contract (if any) or by any other contract."}),"\n",(0,s.jsx)(t.h2,{id:"motivation",children:"Motivation"}),"\n",(0,s.jsx)(t.p,{children:"EIP 165 supports interface discovery - determining if the contract at a given address supports a requested interface. However, in many cases it's useful to be able to discover functionality associated with a name or an address that is implemented by other contracts."}),"\n",(0,s.jsx)(t.p,{children:"For example, a token contract may not itself provide any kind of 'atomic swap' functionality, but there may be associated contracts that do. With ENS interface discovery, the token contract can expose this metadata, informing applications where they can find that functionality."}),"\n",(0,s.jsx)(t.h2,{id:"specification",children:"Specification"}),"\n",(0,s.jsx)(t.p,{children:"A new profile for ENS resolvers is defined, consisting of the following method:"}),"\n",(0,s.jsx)(t.pre,{language:"solidity",code:"function interfaceImplementer(bytes32 node, bytes4 interfaceID) external view returns (address);\n",children:(0,s.jsx)(t.code,{className:"language-solidity",children:'<span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">interfaceImplementer</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">bytes32</span><span style="color: var(--shiki-color-text)"> node</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">bytes4</span><span style="color: var(--shiki-color-text)"> interfaceID) </span><span style="color: var(--shiki-token-keyword)">external</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">view</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">returns</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-constant)">address</span><span style="color: var(--shiki-color-text)">);</span></span>\n<span></span>'})}),"\n",(0,s.jsxs)(t.p,{children:["The EIP-165 interface ID of this interface is ",(0,s.jsx)(t.code,{children:"0xb8f2bbb4"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["Given an ENS name hash ",(0,s.jsx)(t.code,{children:"node"})," and an EIP-165 ",(0,s.jsx)(t.code,{children:"interfaceID"}),", this function returns the address of an appropriate implementer of that interface. If there is no interface matching that interface ID for that node, 0 is returned."]}),"\n",(0,s.jsxs)(t.p,{children:["The address returned by ",(0,s.jsx)(t.code,{children:"interfaceImplementer"})," MUST refer to a smart contract."]}),"\n",(0,s.jsx)(t.p,{children:"The smart contract at the returned address SHOULD implement EIP-165."}),"\n",(0,s.jsxs)(t.p,{children:["Resolvers implementing this interface MAY utilise a fallback strategy: If no matching interface was explicitly provided by the user, query the contract returned by ",(0,s.jsx)(t.code,{children:"addr()"}),", returning its address if the requested interface is supported by that contract, and 0 otherwise. If they do this, they MUST ensure they return 0, rather than reverting, if the target contract reverts."]}),"\n",(0,s.jsx)(t.p,{children:"This field may be used with both forward resolution and reverse resolution."}),"\n",(0,s.jsx)(t.h2,{id:"rationale",children:"Rationale"}),"\n",(0,s.jsx)(t.p,{children:"A naive approach to this problem would involve adding this method directly to the target contract. However, doing this has several shortcomings:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Each contract must maintain its own list of interface implementations."}),"\n",(0,s.jsx)(t.li,{children:"Modifying this list requires access controls, which the contract may not have previously required."}),"\n",(0,s.jsx)(t.li,{children:"Support for this must be designed in when the contract is written, and cannot be retrofitted afterwards."}),"\n",(0,s.jsx)(t.li,{children:"Only one canonical list of interfaces can be supported."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Using ENS resolvers instead mitigates these shortcomings, making it possible for anyone to associate interfaces with a name, even for contracts not previously built with this in mind."}),"\n",(0,s.jsx)(t.h2,{id:"backwards-compatibility",children:"Backwards Compatibility"}),"\n",(0,s.jsx)(t.p,{children:"There are no backwards compatibility issues."}),"\n",(0,s.jsx)(t.h2,{id:"implementation",children:"Implementation"}),"\n",(0,s.jsxs)(t.p,{children:["The PublicResolver in the ",(0,s.jsx)(t.a,{href:"https://github.com/ensdomains/resolvers/",children:"ensdomains/resolvers"})," repository implements this interface."]}),"\n",(0,s.jsx)(t.h2,{id:"copyright",children:"Copyright"}),"\n",(0,s.jsxs)(t.p,{children:["Copyright and related rights waived via ",(0,s.jsx)(t.a,{href:"https://creativecommons.org/publicdomain/zero/1.0/",children:"CC0"}),"."]})]})}var a=!0;t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:t}=Object.assign({},(0,i.ah)(),e.components);return t?(0,s.jsx)(t,Object.assign({},e,{children:(0,s.jsx)(r,e)})):r(e)}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=4810)}),_N_E=e.O()}]);