(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2137],{4552:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/raw/ens-improvement-proposals/ensip-7-contenthash-field",function(){return n(7060)}])},7060:function(e,r,n){"use strict";n.r(r);var t=n(4637),a=n(6988),s=n(1177),o=n(9577),i=function(e){return(0,s.withSSG)((0,a.Z)({filename:"ensip-7-contenthash-field.mdx",route:"/raw/ens-improvement-proposals/ensip-7-contenthash-field",meta:{description:"Introduces a field for storing content addresses and hashes in ENS (formerly EIP-1577)."},pageMap:[{name:"developer",children:[{name:"basics",route:"/developer/basics"},{name:"getting-started",route:"/developer/getting-started"},{name:"index",route:"/developer"},{name:"meta.json",meta:{index:{title:"Developer Documentation",type:"docs",theme:{}},"getting-started":{title:"Getting Started",type:"docs"},basics:{title:"Basics",type:"docs"},"working-directly-with-ens":{title:"Manual Contract API",type:"docs"}},locale:"en-US"},{name:"working-directly-with-ens",route:"/developer/working-directly-with-ens"}],route:"/developer"},{name:"governance",children:[{name:"index",route:"/governance"},{name:"meta.json",meta:{index:{title:"Governance Documentation",type:"docs",theme:{}}},locale:"en-US"}],route:"/governance"},{name:"index",route:"/",frontMatter:{title:"Welcome"}},{name:"meta.json",meta:{index:{title:"Introduction",type:"docs",hidden:!0,theme:{}},about:{title:"About ENS",type:"docs",hidden:!0,theme:{}},user:{title:"User",type:"nav"},developer:{title:"Developer",type:"nav"},technical:{title:"Technical",type:"nav"},governance:{title:"Governance",type:"nav"},raw:{title:"Raw",type:"hidden"}},locale:"en-US"},{name:"raw",children:[{name:"SUMMARY",route:"/raw/SUMMARY"},{name:"bug-bounty-program",route:"/raw/bug-bounty-program"},{name:"contract-api-reference",children:[{name:"ENS-Contracts-Overview",route:"/raw/contract-api-reference/ENS-Contracts-Overview"},{name:"dns-registrar",route:"/raw/contract-api-reference/dns-registrar"},{name:"ens",route:"/raw/contract-api-reference/ens",frontMatter:{description:"The ENS registry."}},{name:"eth-permanent-registrar",children:[{name:"README",route:"/raw/contract-api-reference/eth-permanent-registrar/README"},{name:"controller",route:"/raw/contract-api-reference/eth-permanent-registrar/controller"},{name:"registrar",route:"/raw/contract-api-reference/eth-permanent-registrar/registrar"}],route:"/raw/contract-api-reference/eth-permanent-registrar"},{name:"name-processing",route:"/raw/contract-api-reference/name-processing",frontMatter:{description:"Describes how to normalize and hash ENS names."}},{name:"publicresolver",route:"/raw/contract-api-reference/publicresolver",frontMatter:{description:"The default public resolver."}},{name:"reverseregistrar",route:"/raw/contract-api-reference/reverseregistrar",frontMatter:{description:"The registrar responsible for managing reverse resolution via the .addr.reverse special-purpose TLD."}},{name:"testregistrar",route:"/raw/contract-api-reference/testregistrar"}],route:"/raw/contract-api-reference"},{name:"contract-developer-guide",children:[{name:"resolving-names-on-chain",route:"/raw/contract-developer-guide/resolving-names-on-chain"},{name:"writing-a-registrar",route:"/raw/contract-developer-guide/writing-a-registrar"},{name:"writing-a-resolver",route:"/raw/contract-developer-guide/writing-a-resolver"}],route:"/raw/contract-developer-guide"},{name:"dapp-developer-guide",children:[{name:"ens-as-nft",route:"/raw/dapp-developer-guide/ens-as-nft"},{name:"ens-l2-offchain",route:"/raw/dapp-developer-guide/ens-l2-offchain"},{name:"front-end-design-guidelines",route:"/raw/dapp-developer-guide/front-end-design-guidelines",frontMatter:{description:"ENS is a tool to simplify the experience for your users. Here are a series of guidelines and tools that will help you make design choices and implement the best ENS user experience."}},{name:"managing-names",route:"/raw/dapp-developer-guide/managing-names"},{name:"registering-and-renewing-names",route:"/raw/dapp-developer-guide/registering-and-renewing-names"},{name:"resolving-names",route:"/raw/dapp-developer-guide/resolving-names"}],route:"/raw/dapp-developer-guide"},{name:"deploying-ens-on-a-private-chain",route:"/raw/deploying-ens-on-a-private-chain"},{name:"dns-registrar-guide",route:"/raw/dns-registrar-guide"},{name:"ens-deployments",route:"/raw/ens-deployments"},{name:"ens-improvement-proposals",children:[{name:"README",route:"/raw/ens-improvement-proposals/README",frontMatter:{description:"Standards documentation describing the ENS protocol"}},{name:"ensip-1-ens",route:"/raw/ens-improvement-proposals/ensip-1-ens",frontMatter:{description:"Documentation of the basic ENS protocol (formerly EIP-137)."}},{name:"ensip-10-wildcard-resolution",route:"/raw/ens-improvement-proposals/ensip-10-wildcard-resolution",frontMatter:{description:"Provides a mechanism to support wildcard resolution of ENS names (formerly EIP-2544)."}},{name:"ensip-11-evmchain-address-resolution",route:"/raw/ens-improvement-proposals/ensip-11-evmchain-address-resolution",frontMatter:{description:"Introduces coinType for EVM compatible chains (amending ENSIP9)."}},{name:"ensip-12-avatar-text-records",route:"/raw/ens-improvement-proposals/ensip-12-avatar-text-records",frontMatter:{description:"A standard for storage of the avatar text record in ENS."}},{name:"ensip-2-initial-hash-registrar",route:"/raw/ens-improvement-proposals/ensip-2-initial-hash-registrar",frontMatter:{description:"Describes the hash registrar initially used to register ENS .eth domains (formerly EIP-162)."}},{name:"ensip-3-reverse-resolution",route:"/raw/ens-improvement-proposals/ensip-3-reverse-resolution",frontMatter:{description:"Specifies a TLD, registrar, and resolver interface for reverse resolution of Ethereum addresses using ENS (formerly EIP-181)."}},{name:"ensip-4-support-for-contract-abis",route:"/raw/ens-improvement-proposals/ensip-4-support-for-contract-abis",frontMatter:{description:"A mechanism for storing ABI definitions in ENS, for easy lookup of contract interfaces by callers (formerly EIP-205)."}},{name:"ensip-5-text-records",route:"/raw/ens-improvement-proposals/ensip-5-text-records",frontMatter:{description:"A standard for storage of text records in ENS (formerly EIP-634)."}},{name:"ensip-6-dns-in-ens",route:"/raw/ens-improvement-proposals/ensip-6-dns-in-ens",frontMatter:{description:"Defines a resolver profile for ENS that provides features for storage and lookup of DNS records (formerly EIP-1185)."}},{name:"ensip-7-contenthash-field",route:"/raw/ens-improvement-proposals/ensip-7-contenthash-field",frontMatter:{description:"Introduces a field for storing content addresses and hashes in ENS (formerly EIP-1577)."}},{name:"ensip-8-interface-discovery",route:"/raw/ens-improvement-proposals/ensip-8-interface-discovery",frontMatter:{description:"Defines a method of associating contract interfaces with ENS names and addresses, and of discovering those interfaces (formerly EIP-1844)."}},{name:"ensip-9-multichain-address-resolution",route:"/raw/ens-improvement-proposals/ensip-9-multichain-address-resolution",frontMatter:{description:"Introduces new overloads for the `addr` field for ENS resolvers, which permit resolution of addresses for other blockchains via ENS (formerly EIP-2304)."}}],route:"/raw/ens-improvement-proposals"},{name:"ens-migration-february-2020",children:[{name:"guide-for-dapp-developers",route:"/raw/ens-migration-february-2020/guide-for-dapp-developers"},{name:"technical-description",route:"/raw/ens-migration-february-2020/technical-description"}],route:"/raw/ens-migration-february-2020"},{name:"frequently-asked-questions",route:"/raw/frequently-asked-questions"},{name:"permanent-registrar-faq",route:"/raw/permanent-registrar-faq"},{name:"terminology",route:"/raw/terminology"}],route:"/raw"},{name:"technical",children:[{name:"about",route:"/technical/about"},{name:"index",route:"/technical"},{name:"meta.json",meta:{index:{title:"Technical Documentation",type:"docs",theme:{}}},locale:"en-US"}],route:"/technical"},{name:"user",children:[{name:"index",route:"/user"},{name:"meta.json",meta:{index:{title:"User Documentation",type:"docs",theme:{}}},locale:"en-US"}],route:"/user"}]},o.Z))(e)};function d(e){var r=Object.assign({h1:"h1",table:"table",thead:"thead",tr:"tr",th:"th",strong:"strong",tbody:"tbody",td:"td",h3:"h3",p:"p",code:"code",a:"a",pre:"pre",h4:"h4",ul:"ul",li:"li"},e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.h1,{children:"ENSIP-7: Contenthash field"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:(0,t.jsx)(r.strong,{children:"Author"})}),(0,t.jsxs)(r.th,{children:["Dean Eigenmann ","[dean@ens.domains](mailto:dean@ens.domains), Nick Johnson [nick@ens.domains](mailto:nick@ens.domains)"]})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Status"})}),(0,t.jsx)(r.td,{children:"Final"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Created"})}),(0,t.jsx)(r.td,{children:"2018-11-13"})]})]})]}),"\n",(0,t.jsx)(r.h3,{children:"Abstract"}),"\n",(0,t.jsxs)(r.p,{children:["This ENSIP introduces the new ",(0,t.jsx)(r.code,{children:"contenthash"})," field for ENS resolvers, allowing for a better defined system of mapping names to network and content addresses. Additionally the ",(0,t.jsx)(r.code,{children:"content"})," and ",(0,t.jsx)(r.code,{children:"multihash"})," fields are deprecated."]}),"\n",(0,t.jsx)(r.h3,{children:"Motivation"}),"\n",(0,t.jsxs)(r.p,{children:["Multiple applications including ",(0,t.jsx)(r.a,{href:"https://metamask.io",children:"Metamask"})," and mobile clients such as ",(0,t.jsx)(r.a,{href:"https://status.im",children:"Status"})," have begun resolving ENS names to content hosted on distributed systems such as ",(0,t.jsx)(r.a,{href:"https://ipfs.io",children:"IPFS"})," and ",(0,t.jsx)(r.a,{href:"https://swarm-guide.readthedocs.io",children:"Swarm"}),". Due to the various ways content can be stored and addressed, a standard is required so these applications know how to resolve names and that domain owners know how their content will be resolved."]}),"\n",(0,t.jsxs)(r.p,{children:["The ",(0,t.jsx)(r.code,{children:"contenthash"})," field allows for easy specification of network and content addresses in ENS."]}),"\n",(0,t.jsx)(r.h3,{children:"Specification"}),"\n",(0,t.jsxs)(r.p,{children:["The field ",(0,t.jsx)(r.code,{children:"contenthash"})," is introduced, which permits a wide range of protocols to be supported by ENS names. Resolvers supporting this field MUST return ",(0,t.jsx)(r.code,{children:"true"})," when the ",(0,t.jsx)(r.code,{children:"supportsInterface"})," function is called with argument ",(0,t.jsx)(r.code,{children:"0xbc1c58d1"}),"."]}),"\n",(0,t.jsxs)(r.p,{children:["The fields ",(0,t.jsx)(r.code,{children:"content"})," and ",(0,t.jsx)(r.code,{children:"multihash"})," are deprecated."]}),"\n",(0,t.jsxs)(r.p,{children:["The value returned by ",(0,t.jsx)(r.code,{children:"contenthash"})," MUST be represented as a machine-readable ",(0,t.jsx)(r.a,{href:"https://github.com/multiformats/multicodec",children:"multicodec"}),". The format is specified as follows:"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-raw",children:"<protoCode uvarint><value []byte>\n"})}),"\n",(0,t.jsxs)(r.p,{children:["protoCodes and their meanings are specified in the ",(0,t.jsx)(r.a,{href:"https://github.com/multiformats/multicodec",children:"multiformats/multicodec"})," repository."]}),"\n",(0,t.jsxs)(r.p,{children:["The encoding of the value depends on the content type specified by the protoCode. Values with protocodes of 0xe3 and 0xe4 represent IPFS and Swarm content; these values are encoded as v1 ",(0,t.jsx)(r.a,{href:"https://github.com/multiformats/cid",children:"CIDs"})," without a base prefix, meaning their value is formatted as follows:"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-raw",children:"<protoCode uvarint><cid-version><multicodec-content-type><multihash-content-address>\n"})}),"\n",(0,t.jsxs)(r.p,{children:["When resolving a ",(0,t.jsx)(r.code,{children:"contenthash"}),", applications MUST use the protocol code to determine what type of address is encoded, and resolve the address appropriately for that protocol, if supported."]}),"\n",(0,t.jsx)(r.h4,{children:"Example"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"IPFS"})}),"\n",(0,t.jsx)(r.p,{children:"Input data:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-raw",children:"storage system: IPFS (0xe3)\nCID version: 1 (0x01)\ncontent type: dag-pb (0x70)\nhash function: sha2-256 (0x12)\nhash length: 32 bytes (0x20)\nhash: 29f2d17be6139079dc48696d1f582a8530eb9805b561eda517e22a892c7e3f1f\n"})}),"\n",(0,t.jsx)(r.p,{children:"Binary format:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-raw",children:"0xe3010170122029f2d17be6139079dc48696d1f582a8530eb9805b561eda517e22a892c7e3f1f\n"})}),"\n",(0,t.jsx)(r.p,{children:"Text format:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-raw",children:"ipfs://QmRAQB6YaCyidP37UdDnjFY5vQuiBrcqdyoW1CuDgwxkD4\n"})}),"\n",(0,t.jsx)(r.h4,{children:"Swarm"}),"\n",(0,t.jsx)(r.p,{children:"Input data:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-raw",children:"storage system: Swarm (0xe4)\nCID version: 1 (0x01)\ncontent type: swarm-manifest (0xfa)\nhash function: keccak256 (0x1b)\nhash length: 32 bytes (0x20)\nhash: d1de9994b4d039f6548d191eb26786769f580809256b4685ef316805265ea162\n"})}),"\n",(0,t.jsx)(r.p,{children:"Binary format:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-raw",children:"0xe40101fa011b20d1de9994b4d039f6548d191eb26786769f580809256b4685ef316805265ea162\n"})}),"\n",(0,t.jsx)(r.p,{children:"Text format:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-raw",children:"bzz://d1de9994b4d039f6548d191eb26786769f580809256b4685ef316805265ea162\n"})}),"\n",(0,t.jsx)(r.p,{children:"Example usage with swarm hash:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-raw",children:"$ swarm hash ens contenthash d1de9994b4d039f6548d191eb26786769f580809256b4685ef316805265ea162                                 \n> e40101fa011b20d1de9994b4d039f6548d191eb26786769f580809256b4685ef316805265ea162\n"})}),"\n",(0,t.jsx)(r.h4,{children:"Fallback"}),"\n",(0,t.jsxs)(r.p,{children:["In order to support names that have an IPFS or Swarm hash in their ",(0,t.jsx)(r.code,{children:"content"})," field, a grace period MUST be implemented offering those name holders time to update their names. If a resolver does not support the ",(0,t.jsx)(r.code,{children:"multihash"})," interface, it MUST be checked whether they support the ",(0,t.jsx)(r.code,{children:"content"})," interface. If they do, the value of that field SHOULD be treated in a context dependent fashion and resolved. This condition MUST be enforced until at least March 31st, 2019."]}),"\n",(0,t.jsx)(r.h4,{children:"Implementation"}),"\n",(0,t.jsxs)(r.p,{children:["To support ",(0,t.jsx)(r.code,{children:"contenthash"}),", a new resolver has been developed and can be found ",(0,t.jsx)(r.a,{href:"https://github.com/ensdomains/resolvers/blob/master/contracts/PublicResolver.sol",children:"here"}),", you can also find this smart contract deployed on:"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["Mainnet : ",(0,t.jsx)(r.a,{href:"https://etherscan.io/address/0xd3ddccdd3b25a8a7423b5bee360a42146eb4baf3",children:"0xd3ddccdd3b25a8a7423b5bee360a42146eb4baf3"})]}),"\n",(0,t.jsxs)(r.li,{children:["Ropsten : ",(0,t.jsx)(r.a,{href:"https://ropsten.etherscan.io/address/0xde469c7106a9fbc3fb98912bb00be983a89bddca",children:"0xde469c7106a9fbc3fb98912bb00be983a89bddca"})]}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:["There are also implementations in multiple languages to encode and decode ",(0,t.jsx)(r.code,{children:"contenthash"}),":"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"https://github.com/pldespaigne/content-hash",children:"JavaScript"})}),"\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"https://github.com/filips123/ContentHashPy",children:"Python"})}),"\n"]}),"\n",(0,t.jsx)(r.h3,{children:"Copyright"}),"\n",(0,t.jsxs)(r.p,{children:["Copyright and related rights waived via ",(0,t.jsx)(r.a,{href:"https://creativecommons.org/publicdomain/zero/1.0/",children:"CC0"}),"."]})]})}r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.jsx)(i,Object.assign({},e,{children:(0,t.jsx)(d,e)}))}}},function(e){e.O(0,[4698,9214,9774,2888,179],(function(){return r=4552,e(e.s=r);var r}));var r=e.O();_N_E=r}]);