<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="stylesheet" href="https://rsms.me/inter/inter.css"/><title>Untitled — ENS Documentation</title><style>html{font-family:Inter,sans-serif}@supports(font-variation-settings:normal){html{font-family:'Inter var',sans-serif}}</style><meta name="msapplication-TileColor" content="#ffffff"/><meta name="theme-color" content="#ffffff"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="Content-Language" content="en"/><meta name="description" content="ENS Documentation"/><meta name="og:description" content="ENS Documentation"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:image" content="/_next/static/media/og_preview.42aa5db6.png"/><meta name="twitter:site:domain" content="docs.ens.domains"/><meta name="twitter:url" content="https://docs.ens.domains"/><meta name="og:title" content="ENS Domains Documentation"/><meta name="og:image" content="/_next/static/media/og_preview.42aa5db6.png"/><meta name="apple-mobile-web-app-title" content="Nextra"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><meta name="msapplication-TileImage" content="/ms-icon-144x144.png"/><link rel="icon" href="data:image/svg+xml;utf8,&lt;svg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 100 100&#x27;&gt;&lt;text x=&#x27;50&#x27; y=&#x27;.9em&#x27; font-size=&#x27;90&#x27; text-anchor=&#x27;middle&#x27;&gt;X&lt;/text&gt;&lt;style&gt;text{font-family:system-ui,-apple-system,BlinkMacSystemFont,&quot;Segoe UI&quot;,Roboto,&quot;Helvetica Neue&quot;,Arial,&quot;Noto Sans&quot;,sans-serif,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;,&quot;Segoe UI Symbol&quot;,&quot;Noto Color Emoji&quot;;fill:black}@media(prefers-color-scheme:dark){text{fill:white}}&lt;/style&gt;&lt;/svg&gt;"/><meta name="next-head-count" content="24"/><link rel="preload" href="/_next/static/css/1e3632cdbe0436f9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1e3632cdbe0436f9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-a2f72b7de99e853c.js" defer=""></script><script src="/_next/static/chunks/framework-4bac9926a9106dbf.js" defer=""></script><script src="/_next/static/chunks/main-1687c9c53a9f60c1.js" defer=""></script><script src="/_next/static/chunks/pages/_app-112fc7b68113ba25.js" defer=""></script><script src="/_next/static/chunks/8164-38f9d6cc1168934a.js" defer=""></script><script src="/_next/static/chunks/3248-aa7e430f5f048d0f.js" defer=""></script><script src="/_next/static/chunks/pages/ens-migration-february-2020/technical-description-edd7d6d81bd83fd0.js" defer=""></script><script src="/_next/static/asGQ8xzMR6LErz8pSvaoc/_buildManifest.js" defer=""></script><script src="/_next/static/asGQ8xzMR6LErz8pSvaoc/_ssgManifest.js" defer=""></script></head><body class="bg-ensl-backgroundSecondary dark:bg-ensd-backgroundSecondary"><div id="__next" data-reactroot=""><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="nextra-container main-container flex flex-col"><nav class="flex items-center bg-white z-20 fixed top-0 left-0 right-0 h-16 border-b border-gray-200 px-6 dark:bg-dark dark:border-gray-900 bg-opacity-[.97] dark:bg-opacity-100"><div class="h-10 flex flex-shrink-0 items-center mr-4"><a class="h-full flex no-underline text-current items-center hover:opacity-75" href="/"><img src="/_next/static/media/ens_docs_logo.673820b8.svg" alt="ENS Docs" class="h-full"/></a></div><div class="w-full hidden lg:block"><a class="font-bold no-underline whitespace-nowrap mr-4 hidden md:inline-block text-gray-500" href="/governance">Governance</a><a class="font-bold no-underline whitespace-nowrap mr-4 hidden md:inline-block text-gray-500" href="/user">User</a><a class="font-bold no-underline whitespace-nowrap mr-4 hidden md:inline-block text-gray-500" href="/developer">Developer</a><a class="font-bold no-underline whitespace-nowrap mr-4 hidden md:inline-block text-gray-500" href="/technical">Technical</a></div><div class="flex-1"><div class="hidden md:inline-block mr-2"><div class="nextra-search relative w-full md:w-64"><input type="search" class="appearance-none border rounded py-2 px-3 leading-tight focus:outline-none focus:ring w-full" placeholder="Search (&quot;/&quot; to focus)"/></div></div></div><button class="text-current p-2 cursor-pointer" tabindex="0"><svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" shape-rendering="geometricPrecision"></svg></button><a class="text-current p-2" href="https://github.com/ensdomains/docs-v2" target="_blank"><svg height="24" viewBox="2 2 20 20" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 3C7.0275 3 3 7.12937 3 12.2276C3 16.3109 5.57625 19.7597 9.15374 20.9824C9.60374 21.0631 9.77249 20.7863 9.77249 20.5441C9.77249 20.3249 9.76125 19.5982 9.76125 18.8254C7.5 19.2522 6.915 18.2602 6.735 17.7412C6.63375 17.4759 6.19499 16.6569 5.8125 16.4378C5.4975 16.2647 5.0475 15.838 5.80124 15.8264C6.51 15.8149 7.01625 16.4954 7.18499 16.7723C7.99499 18.1679 9.28875 17.7758 9.80625 17.5335C9.885 16.9337 10.1212 16.53 10.38 16.2993C8.3775 16.0687 6.285 15.2728 6.285 11.7432C6.285 10.7397 6.63375 9.9092 7.20749 9.26326C7.1175 9.03257 6.8025 8.08674 7.2975 6.81794C7.2975 6.81794 8.05125 6.57571 9.77249 7.76377C10.4925 7.55615 11.2575 7.45234 12.0225 7.45234C12.7875 7.45234 13.5525 7.55615 14.2725 7.76377C15.9937 6.56418 16.7475 6.81794 16.7475 6.81794C17.2424 8.08674 16.9275 9.03257 16.8375 9.26326C17.4113 9.9092 17.76 10.7281 17.76 11.7432C17.76 15.2843 15.6563 16.0687 13.6537 16.2993C13.98 16.5877 14.2613 17.1414 14.2613 18.0065C14.2613 19.2407 14.25 20.2326 14.25 20.5441C14.25 20.7863 14.4188 21.0746 14.8688 20.9824C16.6554 20.364 18.2079 19.1866 19.3078 17.6162C20.4077 16.0457 20.9995 14.1611 21 12.2276C21 7.12937 16.9725 3 12 3Z" fill="currentColor"></path></svg></a><button class="block md:hidden p-2"><svg fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button><div class="-mr-2"></div></nav><div class="flex flex-1 h-full"><aside class="fixed h-screen bg-ensl-background dark:bg-ensd-backgroundSecondary flex-shrink-0 w-full md:w-64 xl:w-96 md:sticky z-20 hidden md:block" style="top:4rem;height:calc(100vh - 4rem)"><div class="sidebar border-gray-200 dark:border-gray-900 w-full p-4 pb-40 md:pb-16 h-full overflow-y-auto"><div class="mb-4 block md:hidden"><div class="nextra-search relative w-full md:w-64"><input type="search" class="appearance-none border rounded py-2 px-3 leading-tight focus:outline-none focus:ring w-full" placeholder="Search (&quot;/&quot; to focus)"/></div></div><div class="hidden md:block"><ul><li class=""><a href="/">Introduction</a></li><li class=""><a href="/README">Readme</a></li><li class=""><a href="/SUMMARY">Summary</a></li><li class=""><a href="/bug-bounty-program">Bug-Bounty-Program</a></li><li class="active"><button>Contract-API-Reference</button><div style="display:initial"><ul><li class=""><a href="/contract-api-reference/ENS-Contracts-Overview">Ens-Contracts-Overview</a></li><li class=""><a href="/contract-api-reference/dns-registrar">DNS-Registrar</a></li><li class=""><a href="/contract-api-reference/ens">Ens</a></li><li class="active"><button>Eth-Permanent-Registrar</button><div style="display:initial"><ul><li class=""><a href="/contract-api-reference/eth-permanent-registrar/README">Readme</a></li><li class=""><a href="/contract-api-reference/eth-permanent-registrar/controller">Controller</a></li><li class=""><a href="/contract-api-reference/eth-permanent-registrar/registrar">Registrar</a></li></ul></div></li><li class=""><a href="/contract-api-reference/name-processing">Name-Processing</a></li><li class=""><a href="/contract-api-reference/publicresolver">Publicresolver</a></li><li class=""><a href="/contract-api-reference/reverseregistrar">Reverseregistrar</a></li><li class=""><a href="/contract-api-reference/testregistrar">Testregistrar</a></li></ul></div></li><li class="active"><button>Contract-Developer-Guide</button><div style="display:initial"><ul><li class=""><a href="/contract-developer-guide/resolving-names-on-chain">Resolving-Names-On-Chain</a></li><li class=""><a href="/contract-developer-guide/writing-a-registrar">Writing-A-Registrar</a></li><li class=""><a href="/contract-developer-guide/writing-a-resolver">Writing-A-Resolver</a></li></ul></div></li><li class="active"><button>Dapp-Developer-Guide</button><div style="display:initial"><ul><li class=""><a href="/dapp-developer-guide/ens-as-nft">Ens-As-Nft</a></li><li class=""><a href="/dapp-developer-guide/ens-enabling-your-dapp">Ens-Enabling-Your-Dapp</a></li><li class=""><a href="/dapp-developer-guide/ens-l2-offchain">Ens-L2-Offchain</a></li><li class=""><a href="/dapp-developer-guide/ens-libraries">Ens-Libraries</a></li><li class=""><a href="/dapp-developer-guide/front-end-design-guidelines">Front-End-Design-Guidelines</a></li><li class=""><a href="/dapp-developer-guide/managing-names">Managing-Names</a></li><li class=""><a href="/dapp-developer-guide/registering-and-renewing-names">Registering-And-Renewing-Names</a></li><li class=""><a href="/dapp-developer-guide/resolving-names">Resolving-Names</a></li><li class=""><a href="/dapp-developer-guide/working-with-ens">Working-With-Ens</a></li></ul></div></li><li class=""><a href="/deploying-ens-on-a-private-chain">Deploying-Ens-On-A-Private-Chain</a></li><li class=""><a href="/dns-registrar-guide">DNS-Registrar-Guide</a></li><li class=""><a href="/ens-deployments">Ens-Deployments</a></li><li class="active"><button>Ens-Improvement-Proposals</button><div style="display:initial"><ul><li class=""><a href="/ens-improvement-proposals/README">Readme</a></li><li class=""><a href="/ens-improvement-proposals/ensip-1-ens">Ensip-1-Ens</a></li><li class=""><a href="/ens-improvement-proposals/ensip-10-wildcard-resolution">Ensip-10-Wildcard-Resolution</a></li><li class=""><a href="/ens-improvement-proposals/ensip-11-evmchain-address-resolution">Ensip-11-Evmchain-Address-Resolution</a></li><li class=""><a href="/ens-improvement-proposals/ensip-12-avatar-text-records">Ensip-12-Avatar-Text-Records</a></li><li class=""><a href="/ens-improvement-proposals/ensip-2-initial-hash-registrar">Ensip-2-Initial-Hash-Registrar</a></li><li class=""><a href="/ens-improvement-proposals/ensip-3-reverse-resolution">Ensip-3-Reverse-Resolution</a></li><li class=""><a href="/ens-improvement-proposals/ensip-4-support-for-contract-abis">Ensip-4-Support-For-Contract-Abis</a></li><li class=""><a href="/ens-improvement-proposals/ensip-5-text-records">Ensip-5-Text-Records</a></li><li class=""><a href="/ens-improvement-proposals/ensip-6-dns-in-ens">Ensip-6-DNS-In-Ens</a></li><li class=""><a href="/ens-improvement-proposals/ensip-7-contenthash-field">Ensip-7-Contenthash-Field</a></li><li class=""><a href="/ens-improvement-proposals/ensip-8-interface-discovery">Ensip-8-Interface-Discovery</a></li><li class=""><a href="/ens-improvement-proposals/ensip-9-multichain-address-resolution">Ensip-9-Multichain-Address-Resolution</a></li></ul></div></li><li class="active"><button>Ens-Migration-February-2020</button><div style="display:initial"><ul><li class=""><a href="/ens-migration-february-2020/guide-for-dapp-developers">Guide-For-Dapp-Developers</a></li><li class="active"><a href="/ens-migration-february-2020/technical-description">Technical-Description</a></li></ul></div></li><li class=""><a href="/frequently-asked-questions">Frequently-Asked-Questions</a></li><li class=""><a href="/permanent-registrar-faq">Permanent-Registrar-Faq</a></li><li class=""><a href="/terminology">Terminology</a></li></ul></div><div class="md:hidden"><ul><li class=""><a href="/">Introduction</a></li><li class="active"><button>Governance</button><div style="display:initial"><ul><li class=""><a href="/governance">Governance Documentation</a></li></ul></div></li><li class="active"><button>User</button><div style="display:initial"><ul><li class=""><a href="/user">User Documentation</a></li></ul></div></li><li class="active"><button>Developer</button><div style="display:initial"><ul><li class=""><a href="/developer">Developer Documentation</a></li></ul></div></li><li class="active"><button>Technical</button><div style="display:initial"><ul><li class=""><a href="/technical">Technical Documentation</a></li></ul></div></li><li class=""><a href="/README">Readme</a></li><li class=""><a href="/SUMMARY">Summary</a></li><li class=""><a href="/bug-bounty-program">Bug-Bounty-Program</a></li><li class="active"><button>Contract-API-Reference</button><div style="display:initial"><ul><li class=""><a href="/contract-api-reference/ENS-Contracts-Overview">Ens-Contracts-Overview</a></li><li class=""><a href="/contract-api-reference/dns-registrar">DNS-Registrar</a></li><li class=""><a href="/contract-api-reference/ens">Ens</a></li><li class="active"><button>Eth-Permanent-Registrar</button><div style="display:initial"><ul><li class=""><a href="/contract-api-reference/eth-permanent-registrar/README">Readme</a></li><li class=""><a href="/contract-api-reference/eth-permanent-registrar/controller">Controller</a></li><li class=""><a href="/contract-api-reference/eth-permanent-registrar/registrar">Registrar</a></li></ul></div></li><li class=""><a href="/contract-api-reference/name-processing">Name-Processing</a></li><li class=""><a href="/contract-api-reference/publicresolver">Publicresolver</a></li><li class=""><a href="/contract-api-reference/reverseregistrar">Reverseregistrar</a></li><li class=""><a href="/contract-api-reference/testregistrar">Testregistrar</a></li></ul></div></li><li class="active"><button>Contract-Developer-Guide</button><div style="display:initial"><ul><li class=""><a href="/contract-developer-guide/resolving-names-on-chain">Resolving-Names-On-Chain</a></li><li class=""><a href="/contract-developer-guide/writing-a-registrar">Writing-A-Registrar</a></li><li class=""><a href="/contract-developer-guide/writing-a-resolver">Writing-A-Resolver</a></li></ul></div></li><li class="active"><button>Dapp-Developer-Guide</button><div style="display:initial"><ul><li class=""><a href="/dapp-developer-guide/ens-as-nft">Ens-As-Nft</a></li><li class=""><a href="/dapp-developer-guide/ens-enabling-your-dapp">Ens-Enabling-Your-Dapp</a></li><li class=""><a href="/dapp-developer-guide/ens-l2-offchain">Ens-L2-Offchain</a></li><li class=""><a href="/dapp-developer-guide/ens-libraries">Ens-Libraries</a></li><li class=""><a href="/dapp-developer-guide/front-end-design-guidelines">Front-End-Design-Guidelines</a></li><li class=""><a href="/dapp-developer-guide/managing-names">Managing-Names</a></li><li class=""><a href="/dapp-developer-guide/registering-and-renewing-names">Registering-And-Renewing-Names</a></li><li class=""><a href="/dapp-developer-guide/resolving-names">Resolving-Names</a></li><li class=""><a href="/dapp-developer-guide/working-with-ens">Working-With-Ens</a></li></ul></div></li><li class=""><a href="/deploying-ens-on-a-private-chain">Deploying-Ens-On-A-Private-Chain</a></li><li class=""><a href="/dns-registrar-guide">DNS-Registrar-Guide</a></li><li class=""><a href="/ens-deployments">Ens-Deployments</a></li><li class="active"><button>Ens-Improvement-Proposals</button><div style="display:initial"><ul><li class=""><a href="/ens-improvement-proposals/README">Readme</a></li><li class=""><a href="/ens-improvement-proposals/ensip-1-ens">Ensip-1-Ens</a></li><li class=""><a href="/ens-improvement-proposals/ensip-10-wildcard-resolution">Ensip-10-Wildcard-Resolution</a></li><li class=""><a href="/ens-improvement-proposals/ensip-11-evmchain-address-resolution">Ensip-11-Evmchain-Address-Resolution</a></li><li class=""><a href="/ens-improvement-proposals/ensip-12-avatar-text-records">Ensip-12-Avatar-Text-Records</a></li><li class=""><a href="/ens-improvement-proposals/ensip-2-initial-hash-registrar">Ensip-2-Initial-Hash-Registrar</a></li><li class=""><a href="/ens-improvement-proposals/ensip-3-reverse-resolution">Ensip-3-Reverse-Resolution</a></li><li class=""><a href="/ens-improvement-proposals/ensip-4-support-for-contract-abis">Ensip-4-Support-For-Contract-Abis</a></li><li class=""><a href="/ens-improvement-proposals/ensip-5-text-records">Ensip-5-Text-Records</a></li><li class=""><a href="/ens-improvement-proposals/ensip-6-dns-in-ens">Ensip-6-DNS-In-Ens</a></li><li class=""><a href="/ens-improvement-proposals/ensip-7-contenthash-field">Ensip-7-Contenthash-Field</a></li><li class=""><a href="/ens-improvement-proposals/ensip-8-interface-discovery">Ensip-8-Interface-Discovery</a></li><li class=""><a href="/ens-improvement-proposals/ensip-9-multichain-address-resolution">Ensip-9-Multichain-Address-Resolution</a></li></ul></div></li><li class="active"><button>Ens-Migration-February-2020</button><div style="display:initial"><ul><li class=""><a href="/ens-migration-february-2020/guide-for-dapp-developers">Guide-For-Dapp-Developers</a></li><li class="active"><a href="/ens-migration-february-2020/technical-description">Technical-Description</a></li></ul></div></li><li class=""><a href="/frequently-asked-questions">Frequently-Asked-Questions</a></li><li class=""><a href="/permanent-registrar-faq">Permanent-Registrar-Faq</a></li><li class=""><a href="/terminology">Terminology</a></li></ul></div></div></aside><article class="docs-container relative pt-16 pb-16 px-6 md:px-8 w-full max-w-full flex min-w-0"><main class="max-w-screen-md w-full mx-auto pt-4 z-10 min-w-0"><h1>Technical Description</h1>
<p>Recently, we were made aware of a vulnerability in the ENS registry contract. This vulnerability would make it possible for the owner of a domain to set a &#x27;back door&#x27; such that they could transfer or sell the domain to another user, then, at a later time, claw back ownership of that domain without the new owner&#x27;s consent.</p>
<p>The nature of this vulnerability is such that the attacker must at one point have had legitimate ownership of the domain in question, and they must set this &#x27;back door&#x27; before they relinquished ownership of the name. As a result, this vulnerability cannot be exploited retrospectively.</p>
<p>This vulnerability was reported via the Ethereum Foundation&#x27;s bug bounty process by Sam Sun. We have examined the ENS registry in detail, and are confident that nobody has previously exploited this vulnerability. As a result, ownership of all ENS names is secure.</p>
<p>Due to this, ENS is migrating to a new deployment. This document describes the exact technical steps being taken, along with a brief description of their implications for DApp authors and users.</p>
<p>This document is intended to provide a detailed description for anyone interested in the low-level details of the migration. Understanding this is not necessary for most users or developers; for a description of the vulnerability and its effect on users, see <a href="https://medium.com/the-ethereum-name-service/ens-registry-migration-bug-fix-new-features-64379193a5a">our medium post</a>; for a description of the migration steps for developers see the <a href="guide-for-dapp-developers.md">guide for DApp developers</a>.</p>
<h2>New ENS deployment</h2>
<p>A new instance of most ENS contracts is being deployed. Several of these have changes, while others are being redeployed in order to reference the new registry instead of the old one.</p>
<h3>ENS Registry</h3>
<p>A new version of the ENS registry has been deployed, and can be found at address 0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e Besides fixing the vulnerability, we have taken the opportunity to implement a couple of additional features that will improve ENS&#x27;s usability going forward:</p>
<ul>
<li>Addition of `setRecord` and `setSubnodeRecord` methods, which allow setting owner, resolver, and TTL in a single operation.</li>
<li>Addition of an approval mechanism based on ERC721, that allows users to delegate control over their names to another address, without having to transfer their names.</li>
</ul>
<p>The new registry implementation has been <a href="https://gist.github.com/samczsun/2f0a2e266191042baada48c5407d8986">audited by Sam Sun</a>, as well as reviewed by Consensys Diligence; no issues were found by either auditor.</p>
<p>In order to make the migration as smooth as possible, the new registry has a fallback configured; if a record is not found in its own storage, it will look it up in the previous ENS registry contract. This fallback works only for read operations; if a record exists in the old registry but not yet in the new one, users cannot call functions to modify that record on the new registry.</p>
<p>This means that to migrate each name over from the previous registry, the name must be recreated as if from scratch - so, for example, if &#x27;foo.eth&#x27; does not yet exist in the new registry, the owner of &#x27;eth&#x27; must create it in the same fashion as if it were a new domain, by calling `setSubnodeOwner` (or the new `setSubnodeRecord`). Other top-level domain owners (eg, .luxe, .kred, .club and .art) will need to do this on behalf of their users, so those users can recover write access to their domains.</p>
<p>As a result of this fallback, if a record has not been migrated to the new registry, users and processes can continue to update records in the old registry; when they do, those changes will be reflected in the new one. At the point where a record is migrated to the new registry, it ceases to reflect any changes made in the old one. This ensures that names operated by smart contracts continue to function until their owners can take manual action to migrate them over.</p>
<p>Migration strategies for each class of name are outlined below:</p>
<ul>
<li>Top-level domains (.eth, .luxe, .kred, .club, .art, .xyz, and .reverse) were migrated over as part of the deployment process.</li>
<li>.eth second-level domains (eg, foo.eth) will be migrated over automatically for users - see the &#x27;migration contract&#x27; section below for details.</li>
<li>Subdomains managed by the Subdomain Registrar will also be migrated over automatically for users.</li>
<li>Subdomains created by other means will need to be recreated by the owner of the parent domain calling `setSubnodeOwner` or `setSubnodeRecord`. The ENS dapp at app.ens.domains provides a one-click button to to do this for domains that are owned directly by users.</li>
<li>Reverse records (.addr.reverse domains) will need to be recreated by repeating the &#x27;claim&#x27; process in the ENS dapp UI.</li>
<li>.xyz records will need to be migrated by repeating the &#x27;claim&#x27; process proving ownership of the corresponding DNS domain. This can be done via the ENS Manager UI.</li>
<li>.kred, .art, and .club domains will be migrated by the operators of those top-level domains.</li>
</ul>
<p>Name resolution will continue to work normally for names that have not yet been migrated to the new registry. Migration is only necessary in order for users to be able to change the name&#x27;s ownership, resolver, or TTL.</p>
<h3>.ETH Registrar</h3>
<p>A new instance of the .eth registrar (BaseRegistrarImplementation) has been deployed, and can be found at 0x57f1887a8BF19b14fC0dF6Fd9B2acc9Af147eA85. This registrar is largely unchanged, with only a couple of minor modifications made to support the migration.</p>
<h3>Migration Contract</h3>
<p>A new contract, designed specifically for the migration process, has been deployed and can be found at 0x6109DD117AA5486605FC85e040ab00163a75c662. This contract is configured as a controller for the new .eth registrar, and will be set as the owner of .eth on the old registry once the migration process begins. Functions on this contract permit migrating .eth second-level names (eg, foo.eth) over from the old registry and registrar to the new ones.</p>
<p>Once activated, the ENS team will submit transactions to migrate over all presently registered .eth second-level domains to the new deployment. Registrations for all names will be automatically moved over to the new registrar, with the same expiry date as they had previously. Registry records will be automatically migrated over, unless they are controlled by a contract. Records controlled by contracts will not be automatically migrated in order to avoid breaking registrar contracts.</p>
<p>If you own a name that is controlled by a smart contract (for example, you&#x27;re using a custom registrar to allocate subdomains), you will need to deploy a new version of that contract that references the new ENS registry, then manually migrate the name yourself, by using the &#x27;Set controller&#x27; functionality in the ENS manager dapp.</p>
<p>In addition, the ENS team is automatically migrating over records from the legacy (auction-based) registrar. Names on the legacy registrar that have not previously been migrated over will be automatically created in the new deployment, with their expiration dates set to their existing expiry of May 4, 2020, meaning users will no longer have to do this manually - though they will still have to send a transaction to recover their deposit, which they can do at any time. This permits the new ENS deployment to do away with legacy code for supporting this obsolete registrar.</p>
<h3>Public Resolver</h3>
<p>A new instance of the public resolver has been deployed, and can be found at 0x4976fb03C32e5B8cfe2b6cCB31c09Ba78EBaBa41. This instance references the new ENS registry, and has an additional &#x27;multicall&#x27; feature implemented, which permits users to set multiple records in a single operation.</p>
<p>Since the public resolver looks up names in the ENS registry to determine who is permitted to configure records for them, while names - migrated or otherwise - pointed at an old instance of the public resolver will continue to function, they will need to migrate to the new public resolver in order to make changes. The ENS dapp at app.ens.domains facilitates this process using the new <code>multicall</code> function, making it possible to migrate over all records for a name in two transactions: the first one copying all records from the old resolver to the new one, and the second one updating the registry to point to the new resolver contract.</p>
<h3>.ETH Registrar Controller</h3>
<p>All registration requests for ENS .eth second-level names are processed via a <a href="https://docs.ens.domains/contract-api-reference/.eth-permanent-registrar/controller">&#x27;controller&#x27; contract</a>. Once the migration is complete and all names from the old registry and registrar have been re-registered on the new one, the ENS team will enable the standard registrar controller, which permits registrations via the standard two-transaction process. The controller contract has no changes from the previous deployment.</p>
<h3>Reverse Registrar</h3>
<p>A new instance of the reverse registrar has been deployed to point to the new registry. There are no changes to this compared to the old version. Reverse resolution will continue to function as normal throughout the transition.</p>
<h3>DNSSEC Registrar</h3>
<p>A new instance of the DNSSEC registrar has been deployed. The new instance retains all the functionality of the old one, while incorporating a few improvements that will make rolling DNSSEC support out to more top-level domains easier. Resolution of .xyz names will continue to function as normal, but any owners of these names wanting to make changes will have to repeat the &#x27;claim&#x27; process to reclaim ownership of the name.</p>
<h3>Subdomain Registrar</h3>
<p>A new instance of the subdomain registrar has been deployed. This instance is largely unchanged from the previous version, except insofar as it supports migrating from that version to the new one.</p><footer class="mt-24"><div class="flex flex-row items-center justify-between"><div><a class="text-lg font-medium p-4 -m-4 no-underline text-gray-600 hover:text-blue-600 flex items-center mr-2" title="Guide-For-Dapp-Developers" href="/ens-migration-february-2020/guide-for-dapp-developers"><svg height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="transform inline flex-shrink-0 rotate-180 mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>Guide-For-Dapp-Developers</a></div><div><a class="text-lg font-medium p-4 -m-4 no-underline text-gray-600 hover:text-blue-600 flex items-center ml-2" title="Frequently-Asked-Questions" href="/frequently-asked-questions">Frequently-Asked-Questions<svg height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="transform inline flex-shrink-0 ml-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></a></div></div><hr/><div class="mt-24 flex justify-between flex-col-reverse md:flex-row items-center md:items-end"><span class="text-gray-600">GPLv3 <!-- -->2022<!-- --> © ENS Labs</span><div class="mt-6"></div><a class="text-sm" href="https://github.com/ensdomains/docs-v2/blob/main/pages/ens-migration-february-2020/technical-description.mdx" target="_blank">Edit this page on GitHub</a></div></footer></main><div class="w-64 hidden 2xl:block text-sm pl-4"></div></article></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/ens-migration-february-2020/technical-description","query":{},"buildId":"asGQ8xzMR6LErz8pSvaoc","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>