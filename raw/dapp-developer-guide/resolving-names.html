<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="stylesheet" href="https://rsms.me/inter/inter.css"/><title>Untitled — ENS Documentation</title><style>html{font-family:Inter,sans-serif}@supports(font-variation-settings:normal){html{font-family:'Inter var',sans-serif}}</style><meta name="msapplication-TileColor" content="#ffffff"/><meta name="theme-color" content="#ffffff"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="Content-Language" content="en"/><meta name="description" content="ENS Documentation"/><meta name="og:description" content="ENS Documentation"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:image" content="/_next/static/media/og_preview.42aa5db6.png"/><meta name="twitter:site:domain" content="docs.ens.domains"/><meta name="twitter:url" content="https://docs.ens.domains"/><meta name="og:title" content="ENS Domains Documentation"/><meta name="og:image" content="/_next/static/media/og_preview.42aa5db6.png"/><meta name="apple-mobile-web-app-title" content="Nextra"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><meta name="next-head-count" content="19"/><link rel="preload" href="/_next/static/css/3db34c9c9d9fd663.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3db34c9c9d9fd663.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-bc8326c557616909.js" defer=""></script><script src="/_next/static/chunks/framework-4bac9926a9106dbf.js" defer=""></script><script src="/_next/static/chunks/main-1687c9c53a9f60c1.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d2814074e79cd9a6.js" defer=""></script><script src="/_next/static/chunks/8164-640f4ead3a217462.js" defer=""></script><script src="/_next/static/chunks/3248-17162ff17a78d5bc.js" defer=""></script><script src="/_next/static/chunks/pages/raw/dapp-developer-guide/resolving-names-ebc0520477e162d7.js" defer=""></script><script src="/_next/static/-tOebcYzGItoSYhq_2W0n/_buildManifest.js" defer=""></script><script src="/_next/static/-tOebcYzGItoSYhq_2W0n/_ssgManifest.js" defer=""></script></head><body class="bg-ensl-backgroundSecondary dark:bg-ensd-backgroundSecondary"><div id="__next" data-reactroot=""><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="nextra-container main-container flex flex-col"><nav class="flex items-center bg-white z-20 fixed top-0 left-0 right-0 h-16 border-b border-gray-200 px-6 dark:bg-dark dark:border-gray-900 bg-opacity-[.97] dark:bg-opacity-100"><div class="h-10 flex flex-shrink-0 items-center mr-4"><a class="h-full flex no-underline text-current items-center hover:opacity-75" href="/"><img src="/_next/static/media/ens_docs_logo.673820b8.svg" alt="ENS Docs" class="h-full"/></a></div><div class="w-full hidden lg:block"><a class="font-bold no-underline whitespace-nowrap mr-4 hidden md:inline-block text-gray-500" href="/user">User</a><a class="font-bold no-underline whitespace-nowrap mr-4 hidden md:inline-block text-gray-500" href="/developer">Developer</a><a class="font-bold no-underline whitespace-nowrap mr-4 hidden md:inline-block text-gray-500" href="/technical">Technical</a><a class="font-bold no-underline whitespace-nowrap mr-4 hidden md:inline-block text-gray-500" href="/governance">Governance</a></div><div class="flex-1"><div class="hidden md:inline-block mr-2"><div class="nextra-search relative w-full md:w-64"><input type="search" class="appearance-none border rounded py-2 px-3 leading-tight focus:outline-none focus:ring w-full" placeholder="Search (&quot;/&quot; to focus)"/></div></div></div><button class="text-current p-2 cursor-pointer" tabindex="0"><svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" shape-rendering="geometricPrecision"></svg></button><a class="text-current p-2" href="https://github.com/ensdomains/docs-v2" target="_blank"><svg height="24" viewBox="2 2 20 20" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 3C7.0275 3 3 7.12937 3 12.2276C3 16.3109 5.57625 19.7597 9.15374 20.9824C9.60374 21.0631 9.77249 20.7863 9.77249 20.5441C9.77249 20.3249 9.76125 19.5982 9.76125 18.8254C7.5 19.2522 6.915 18.2602 6.735 17.7412C6.63375 17.4759 6.19499 16.6569 5.8125 16.4378C5.4975 16.2647 5.0475 15.838 5.80124 15.8264C6.51 15.8149 7.01625 16.4954 7.18499 16.7723C7.99499 18.1679 9.28875 17.7758 9.80625 17.5335C9.885 16.9337 10.1212 16.53 10.38 16.2993C8.3775 16.0687 6.285 15.2728 6.285 11.7432C6.285 10.7397 6.63375 9.9092 7.20749 9.26326C7.1175 9.03257 6.8025 8.08674 7.2975 6.81794C7.2975 6.81794 8.05125 6.57571 9.77249 7.76377C10.4925 7.55615 11.2575 7.45234 12.0225 7.45234C12.7875 7.45234 13.5525 7.55615 14.2725 7.76377C15.9937 6.56418 16.7475 6.81794 16.7475 6.81794C17.2424 8.08674 16.9275 9.03257 16.8375 9.26326C17.4113 9.9092 17.76 10.7281 17.76 11.7432C17.76 15.2843 15.6563 16.0687 13.6537 16.2993C13.98 16.5877 14.2613 17.1414 14.2613 18.0065C14.2613 19.2407 14.25 20.2326 14.25 20.5441C14.25 20.7863 14.4188 21.0746 14.8688 20.9824C16.6554 20.364 18.2079 19.1866 19.3078 17.6162C20.4077 16.0457 20.9995 14.1611 21 12.2276C21 7.12937 16.9725 3 12 3Z" fill="currentColor"></path></svg></a><button class="block md:hidden p-2"><svg fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button><div class="-mr-2"></div></nav><div class="flex flex-1 h-full"><aside class="fixed h-screen bg-ensl-background dark:bg-ensd-backgroundSecondary flex-shrink-0 w-full md:w-64 xl:w-96 md:sticky z-20 hidden md:block" style="top:4rem;height:calc(100vh - 4rem)"><div class="sidebar border-gray-200 dark:border-gray-900 w-full p-4 pb-40 md:pb-16 h-full overflow-y-auto"><div class="mb-4 block md:hidden"><div class="nextra-search relative w-full md:w-64"><input type="search" class="appearance-none border rounded py-2 px-3 leading-tight focus:outline-none focus:ring w-full" placeholder="Search (&quot;/&quot; to focus)"/></div></div><div class="hidden md:block"><ul><li class=""><a href="/">Introduction</a></li></ul></div><div class="md:hidden"><ul><li class=""><a href="/">Introduction</a></li><li class="active"><button>User</button><div style="display:initial"><ul><li class=""><a href="/user">User Documentation</a></li></ul></div></li><li class="active"><button>Developer</button><div style="display:initial"><ul><li class=""><a href="/developer">Developer Documentation</a></li><li class=""><a href="/developer/getting-started">Getting Started</a></li><li class=""><a href="/developer/basics">Basics</a></li><li class=""><a href="/developer/working-directly-with-ens">Manual Contract API</a></li></ul></div></li><li class="active"><button>Technical</button><div style="display:initial"><ul><li class=""><a href="/technical">Technical Documentation</a></li><li class=""><a href="/technical/about">About</a></li></ul></div></li><li class="active"><button>Governance</button><div style="display:initial"><ul><li class=""><a href="/governance">Governance Documentation</a></li></ul></div></li><li class="active"><button>Raw</button><div style="display:initial"><ul><li class=""><a href="/raw/SUMMARY">Summary</a></li><li class=""><a href="/raw/bug-bounty-program">Bug-Bounty-Program</a></li><li class="active"><button>Contract-API-Reference</button><div style="display:initial"><ul><li class=""><a href="/raw/contract-api-reference/ENS-Contracts-Overview">Ens-Contracts-Overview</a></li><li class=""><a href="/raw/contract-api-reference/dns-registrar">DNS-Registrar</a></li><li class=""><a href="/raw/contract-api-reference/ens">Ens</a></li><li class="active"><button>Eth-Permanent-Registrar</button><div style="display:initial"><ul><li class=""><a href="/raw/contract-api-reference/eth-permanent-registrar/README">Readme</a></li><li class=""><a href="/raw/contract-api-reference/eth-permanent-registrar/controller">Controller</a></li><li class=""><a href="/raw/contract-api-reference/eth-permanent-registrar/registrar">Registrar</a></li></ul></div></li><li class=""><a href="/raw/contract-api-reference/name-processing">Name-Processing</a></li><li class=""><a href="/raw/contract-api-reference/publicresolver">Publicresolver</a></li><li class=""><a href="/raw/contract-api-reference/reverseregistrar">Reverseregistrar</a></li><li class=""><a href="/raw/contract-api-reference/testregistrar">Testregistrar</a></li></ul></div></li><li class="active"><button>Contract-Developer-Guide</button><div style="display:initial"><ul><li class=""><a href="/raw/contract-developer-guide/resolving-names-on-chain">Resolving-Names-On-Chain</a></li><li class=""><a href="/raw/contract-developer-guide/writing-a-registrar">Writing-A-Registrar</a></li><li class=""><a href="/raw/contract-developer-guide/writing-a-resolver">Writing-A-Resolver</a></li></ul></div></li><li class="active"><button>Dapp-Developer-Guide</button><div style="display:initial"><ul><li class=""><a href="/raw/dapp-developer-guide/ens-as-nft">Ens-As-Nft</a></li><li class=""><a href="/raw/dapp-developer-guide/ens-l2-offchain">Ens-L2-Offchain</a></li><li class=""><a href="/raw/dapp-developer-guide/front-end-design-guidelines">Front-End-Design-Guidelines</a></li><li class=""><a href="/raw/dapp-developer-guide/managing-names">Managing-Names</a></li><li class=""><a href="/raw/dapp-developer-guide/registering-and-renewing-names">Registering-And-Renewing-Names</a></li><li class="active"><a href="/raw/dapp-developer-guide/resolving-names">Resolving-Names</a></li></ul></div></li><li class=""><a href="/raw/deploying-ens-on-a-private-chain">Deploying-Ens-On-A-Private-Chain</a></li><li class=""><a href="/raw/dns-registrar-guide">DNS-Registrar-Guide</a></li><li class=""><a href="/raw/ens-deployments">Ens-Deployments</a></li><li class="active"><button>Ens-Improvement-Proposals</button><div style="display:initial"><ul><li class=""><a href="/raw/ens-improvement-proposals/README">Readme</a></li><li class=""><a href="/raw/ens-improvement-proposals/ensip-1-ens">Ensip-1-Ens</a></li><li class=""><a href="/raw/ens-improvement-proposals/ensip-10-wildcard-resolution">Ensip-10-Wildcard-Resolution</a></li><li class=""><a href="/raw/ens-improvement-proposals/ensip-11-evmchain-address-resolution">Ensip-11-Evmchain-Address-Resolution</a></li><li class=""><a href="/raw/ens-improvement-proposals/ensip-12-avatar-text-records">Ensip-12-Avatar-Text-Records</a></li><li class=""><a href="/raw/ens-improvement-proposals/ensip-2-initial-hash-registrar">Ensip-2-Initial-Hash-Registrar</a></li><li class=""><a href="/raw/ens-improvement-proposals/ensip-3-reverse-resolution">Ensip-3-Reverse-Resolution</a></li><li class=""><a href="/raw/ens-improvement-proposals/ensip-4-support-for-contract-abis">Ensip-4-Support-For-Contract-Abis</a></li><li class=""><a href="/raw/ens-improvement-proposals/ensip-5-text-records">Ensip-5-Text-Records</a></li><li class=""><a href="/raw/ens-improvement-proposals/ensip-6-dns-in-ens">Ensip-6-DNS-In-Ens</a></li><li class=""><a href="/raw/ens-improvement-proposals/ensip-7-contenthash-field">Ensip-7-Contenthash-Field</a></li><li class=""><a href="/raw/ens-improvement-proposals/ensip-8-interface-discovery">Ensip-8-Interface-Discovery</a></li><li class=""><a href="/raw/ens-improvement-proposals/ensip-9-multichain-address-resolution">Ensip-9-Multichain-Address-Resolution</a></li></ul></div></li><li class="active"><button>Ens-Migration-February-2020</button><div style="display:initial"><ul><li class=""><a href="/raw/ens-migration-february-2020/guide-for-dapp-developers">Guide-For-Dapp-Developers</a></li><li class=""><a href="/raw/ens-migration-february-2020/technical-description">Technical-Description</a></li></ul></div></li><li class=""><a href="/raw/frequently-asked-questions">Frequently-Asked-Questions</a></li><li class=""><a href="/raw/permanent-registrar-faq">Permanent-Registrar-Faq</a></li><li class=""><a href="/raw/terminology">Terminology</a></li></ul></div></li></ul></div></div></aside><article class="docs-container relative pt-16 pb-16 px-6 md:px-8 w-full max-w-full flex min-w-0"><main class="max-w-screen-md w-full mx-auto pt-4 z-10 min-w-0"><h1>Resolving Names</h1>
<p>The ENS namespace includes both .eth names (which are native to ENS) and DNS names imported into ENS. Because the DNS suffix namespace expands over time, a hardcoded list of name suffixes for recognizing ENS names will regularly be out of date, leading to your application not recognizing all valid ENS names. To remain future-proof, <strong>a correct integration of ENS treats any dot-separated name as a potential ENS name and will attempt a look-up</strong>.</p>
<h2>Looking up cryptocurrency addresses</h2>
<p>Names can have many types of data associated with them; the most common is cryptocurrency addresses. ENS supports storing and resolving the addresses of any arbitrary blockchain.</p>
<p><strong>Resolving a name to an Ethereum address</strong> using a library is simple:</p>
<div class="mt-4"><div class="flex w-fit border-l border-l-ensl-border" style="margin-bottom:-1px"><button class="p-2 pb-4 border-r border-t border-b bg-white border-ensl-border border-b-ensl-background border-b z-10">ensjs</button><button class="p-2 pb-4 border-r border-t border-b bg-ensl-backgroundSecondary border-ensl-border hover:brightness-105">web3.js</button><button class="p-2 pb-4 border-r border-t border-b bg-ensl-backgroundSecondary border-ensl-border hover:brightness-105">ethjs-ens</button><button class="p-2 pb-4 border-r border-t border-b bg-ensl-backgroundSecondary border-ensl-border hover:brightness-105">ethers.js</button><button class="p-2 pb-4 border-r border-t border-b bg-ensl-backgroundSecondary border-ensl-border hover:brightness-105">go-ens</button><button class="p-2 pb-4 border-r border-t border-b bg-ensl-backgroundSecondary border-ensl-border hover:brightness-105">web3.py</button><button class="p-2 pb-4 border-r border-t border-b bg-ensl-backgroundSecondary border-ensl-border hover:brightness-105">web3j</button></div><div class="border border-ensl-border bg-ensl-background px-6"><div class=""><div><pre><code class="language-javascript">var address = await ens.name(&#x27;resolver.eth&#x27;).getAddress();
</code></pre></div></div><div class="hidden"><div><pre><code class="language-javascript">var address = ens.getAddress(&#x27;alice.eth&#x27;);
</code></pre></div></div><div class="hidden"><div><pre><code class="language-javascript">var address = await ens.lookup(&#x27;alice.eth&#x27;);
</code></pre></div></div><div class="hidden"><div><pre><code class="language-javascript">var address = await provider.resolveName(&#x27;alice.eth&#x27;);
</code></pre><p>ethers.js also supports using ENS names anywhere you would use an address, meaning you often do not need to directly call <code>resolveName</code>. For example, to look up an account&#x27;s balance, you can do:</p><pre><code class="language-javascript">var balance = await provider.getBalance(&#x27;alice.eth&#x27;);
</code></pre><p>Or, to instantiate a contract:</p><pre><code class="language-javascript">const abi = [
  &quot;function getValue() view returns (string value)&quot;,
  &quot;function setValue(string value)&quot;
];
const contract = new ethers.Contract(&#x27;contract.alice.eth&#x27;, abi, provider);
</code></pre></div></div><div class="hidden"><div><pre><code class="language-go">address, err := ens.Resolve(client, &quot;alice.eth&quot;)
</code></pre></div></div><div class="hidden"><div><pre><code>address = ns.address(&#x27;alice.eth&#x27;)
</code></pre></div></div><div class="hidden"><div><pre><code class="language-java">String address = ens.resolve(&quot;alice.eth&quot;);
</code></pre><p>web3j also supports using ENS names anywhere you would use an address, meaning you often do not need to directly interact with the <code>EnsResolver</code> object. For example, to instantiate a contract interface, you can do:</p><pre><code class="language-java">YourSmartContract contract = YourSmartContract.load(
        &quot;contract.alice.eth&quot;, web3j, credentials, GAS_PRICE, GAS_LIMIT);
</code></pre></div></div></div></div>
<p>Resolution without a library is a three step process:</p>
<ol>
<li>Normalise and hash the name - see <a href="../contract-api-reference/name-processing.md">name processing</a> for details.</li>
<li>Call <code>resolver()</code> on the ENS registry, passing in the output of step 1. This returns the address of the resolver responsible for the name.</li>
<li>Using the <a href="https://github.com/ensdomains/resolvers/blob/master/contracts/Resolver.sol">resolver interface</a>, call <code>addr()</code> on the resolver address returned in step 2, passing in the hashed name calculated in step 1.</li>
</ol>
<p><strong>Resolution support for the addresses of other blockchains</strong> is implemented with an additional overload on <code>addr()</code>. To resolve a non-Ethereum address, supply both the namehash and the <a href="https://github.com/satoshilabs/slips/blob/master/slip-0044.md">SLIP44</a> chain ID of the cryptocurrency whose address you want to resolve. For example, to resolve a Bitcoin address, you would call <code>addr(hash, 0)</code>. Note that the returned address will be in binary representation, and so will need decoding to a text-format address; for details, see <a href="https://eips.ethereum.org/EIPS/eip-2304">EIP 2304</a>.</p>
<div class="bg-yellow-200 text-yellow-900 dark:text-yellow-200 dark:bg-yellow-700 dark:bg-opacity-30 flex rounded-lg callout mt-6"><div class="pl-6 pr-2 py-6 select-none text-xl" style="font-family:&quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;">⚠️</div><div class="pr-4 pl-2 py-6 noheadpats"><p>If you are resolving addr() records, you MUST treat a return value from the resolver of 0x00…00 as that record being unset. Failing to do so could result in users accidentally sending funds to the null address if they have configured a resolver in ENS, but not set the resolver record!</p></div></div>
<h2>Looking up other resources</h2>
<p>ENS supports many types of resources besides Ethereum addresses, including other cryptocurrency addresses, content hashes (hashes for IPFS, Skynet, and Swarm, and Tor .onion addresses), contract interfaces (ABIs), and text-based metadata. The process for looking these up varies from library to library; for specific details see your chosen library&#x27;s documentation.</p>
<p>Resolving these content types without a library follows the same 3-step process detailed above; simply call the relevant method on the resolver in step 3 instead of <code>addr()</code>.</p>
<div class="mt-4"><div class="flex w-fit border-l border-l-ensl-border" style="margin-bottom:-1px"><button class="p-2 pb-4 border-r border-t border-b bg-white border-ensl-border border-b-ensl-background border-b z-10">ensjs</button><button class="p-2 pb-4 border-r border-t border-b bg-ensl-backgroundSecondary border-ensl-border hover:brightness-105">web3.js</button><button class="p-2 pb-4 border-r border-t border-b bg-ensl-backgroundSecondary border-ensl-border hover:brightness-105">ethjs-ens</button><button class="p-2 pb-4 border-r border-t border-b bg-ensl-backgroundSecondary border-ensl-border hover:brightness-105">ethers.js</button><button class="p-2 pb-4 border-r border-t border-b bg-ensl-backgroundSecondary border-ensl-border hover:brightness-105">go-ens</button><button class="p-2 pb-4 border-r border-t border-b bg-ensl-backgroundSecondary border-ensl-border hover:brightness-105">web3.py</button><button class="p-2 pb-4 border-r border-t border-b bg-ensl-backgroundSecondary border-ensl-border hover:brightness-105">web3j</button></div><div class="border border-ensl-border bg-ensl-background px-6"><div class=""><div><pre><code class="language-javascript">// Getting contenthash
await ens.name(&#x27;abittooawesome.eth&#x27;).getContent()
// Setting contenthash
await ens.name(&#x27;abittooawesome.eth&#x27;).setContenthash(contentHash)

// Getting other coins
await ens.name(&#x27;brantly.eth&#x27;).getAddress(&#x27;BTC&#x27;)
// Setting other coins
await ens.name(&#x27;superawesome.eth&#x27;).setAddress(&#x27;ETC&#x27;, &#x27;0x0000000000000000000000000000000000012345&#x27;)
// Getting text
await ens.name(&#x27;resolver.eth&#x27;).getText(&#x27;url&#x27;)
// Setting text
await ens.name(&#x27;superawesome.eth&#x27;).setText(&#x27;url&#x27;, &#x27;http://google.com&#x27;)
</code></pre></div></div><div class="hidden"><div><pre><code class="language-javascript">// Getting contenthash
web3.eth.ens.getContenthash(&#x27;ethereum.eth&#x27;).then(function (result) {
    console.log(result);
});
// Setting contenthash
web3.eth.ens.setContenthash(&#x27;ethereum.eth&#x27;, hash);
</code></pre></div></div><div class="hidden"><div><pre><code class="language-javascript">Not supported.
</code></pre></div></div><div class="hidden"><div><pre><code class="language-javascript">  const resolver = await provider.getResolver(&#x27;abittooawesome.eth&#x27;);
  const contentHash = await resolver.getContentHash();
  const btcAddress = await resolver.getAddress(0);
  const dogeAddress = await resolver.getAddress(3);
  const email = await resolver.getText(&quot;email&quot;);
</code></pre></div></div><div class="hidden"><div><pre><code class="language-go">// Encoding
bin, err := ens.StringToContenthash(&quot;/ipfs/QmayQq2DWCkY3d4x3xKh4suohuRPEXe2fBqMBam5xtDj3t&quot;)
// Setting contenthash
resolver.SetContenthash(opts, data)
// Getting contenthash
resolver.Contenthash()
// Decoding
repr, err := ens.ContenthashToString(bin)

// Getting Multicoin
btcAddress, err := resolver.MultiAddress(0)
// Setting Multicoin
resolver.SetMultiAddress(opts, address)

// Setting text
resolver.SetText(opts, name, value)
// Getting text
resolver.Text(name)
</code></pre></div></div><div class="hidden"><div><pre><code class="language-raw">Not supported.
</code></pre></div></div><div class="hidden"><div><pre><code class="language-java">Not supported.
</code></pre></div></div></div></div>
<h3>Encoding and decoding contenthash</h3>
<p><code>contenthash</code> is used to store IPFSand Swarm content hashes, which permit resolving ENS addresses to distributed content (eg, websites) hosted on these distributed networks. <a href="https://github.com/ensdomains/content-hash">content-hash</a> javascript library provides a convenient way to encode/decode these hashes.</p>
<pre><code class="language-javascript"> const contentHash = require(&#x27;content-hash&#x27;)
const encoded = &#x27;e3010170122029f2d17be6139079dc48696d1f582a8530eb9805b561eda517e22a892c7e3f1f&#x27;
const content = contentHash.decode(encoded)
// &#x27;QmRAQB6YaCyidP37UdDnjFY5vQuiBrcqdyoW1CuDgwxkD4&#x27;

const onion = &#x27;zqktlwi4fecvo6ri&#x27;
contentHash.encode(&#x27;onion&#x27;, onion);
// &#x27;bc037a716b746c776934666563766f367269&#x27;

const encoded = &#x27;e40101701b20d1de9994b4d039f6548d191eb26786769f580809256b4685ef316805265ea162&#x27;

const codec = contentHash.getCodec(encoded) // &#x27;swarm-ns&#x27;
codec === &#x27;ipfs-ns&#x27; // false
</code></pre>
<p>Note for ipns: For security reasons, the encoding of ipns is only allowed for <code>libp2p-key</code> codec. Decoding with other formats will show a deprecation warning. Please read <a href="https://github.com/ensdomains/content-hash/pull/5">here</a> for more detail.</p>
<h3>Coin type and encoding/decoding</h3>
<p>While some libraries allow you to query cryptocurrency addresses via their symbol (e.g.: <code>BTC</code>), others do not have the built-in support, and you have to call via each coin id (e.g.: <code>0</code> for <code>BTC</code>, <code>16</code> for `ETH). For Javascript/Typescript, we have <a href="https://github.com/ensdomains/address-encoder">@ensdomains/address-encoder</a> library that allows you to convert</p>
<pre><code class="language-javascript">import { formatsByName, formatsByCoinType } from &#x27;@ensdomains/address-encoder&#x27;;

formatsByName[&#x27;BTC&#x27;]
// {
//   coinType: 0,
//   decoder: [Function (anonymous)],
//   encoder: [Function (anonymous)],
//   name: &#x27;BTC&#x27;
// }
</code></pre>
<p>To save storage space as well as prevent users from setting wrong token address, the library has <code>encoder</code> and <code>decoder</code></p>
<pre><code class="language-javascript">const data = formatsByName[&#x27;BTC&#x27;].decoder(&#x27;1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa&#x27;);
console.log(data.toString(&#x27;hex&#x27;)); // 76a91462e907b15cbf27d5425399ebf6f0fb50ebb88f1888ac
const addr = formatsByCoinType[0].encoder(data);
console.log(addr); // 1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa
</code></pre>
<h3>Listing cryptocurrency addresses and text records</h3>
<p>For cryptocurrency addresses and text records, you need to know the coin type or key names to get the value. If you want to list down all the cryptocurrency addresses and text records the user has set, you have to either retrieve the information from <code>Event</code> or query via <a href="https://thegraph.com/explorer/subgraph/ensdomains/ens">ENS subgraph</a>.</p>
<p>For example</p>
<pre><code class="language-javascript">{
  domains(where:{name:&quot;vitalik.eth&quot;}) {
    id
    name
    resolver{
      texts
      coinTypes
    }
  }
}
</code></pre>
<p>will return the following result</p>
<pre><code class="language-javascript">{
  &quot;data&quot;: {
    &quot;domains&quot;: [
      {
        &quot;id&quot;: &quot;0xee6c4522aab0003e8d14cd40a6af439055fd2577951148c14b6cea9a53475835&quot;,
        &quot;name&quot;: &quot;vitalik.eth&quot;,
        &quot;resolver&quot;: {
          &quot;coinTypes&quot;: [
            60
          ],
          &quot;texts&quot;: [
            &quot;url&quot;
          ]
        }
      }
    ]
  }
}
</code></pre>
<h2>Reverse Resolution</h2>
<p>While &#x27;regular&#x27; resolution involves mapping from a name to an address, reverse resolution maps from an address back to a name. ENS supports reverse resolution to allow applications to display ENS names in place of hexadecimal addresses.</p>
<p>Reverse resolution is accomplished via the special purpose domain <em>addr.reverse</em> and the resolver function <code>name()</code>. <em>addr.reverse</em> is owned by a special purpose registrar contract that allocates subdomains to the owner of the matching address - for instance, the address <em>0x314159265dd8dbb310642f98f50c066173c1259b</em> may claim the name <em>314159265dd8dbb310642f98f50c066173c1259b.addr.reverse</em>, and configure a resolver and records on it. The resolver in turn supports the <code>name()</code> function, which returns the name associated with that address.</p>
<div class="bg-yellow-200 text-yellow-900 dark:text-yellow-200 dark:bg-yellow-700 dark:bg-opacity-30 flex rounded-lg callout mt-6"><div class="pl-6 pr-2 py-6 select-none text-xl" style="font-family:&quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;">⚠️</div><div class="pr-4 pl-2 py-6 noheadpats"><p>ENS does not enforce the accuracy of reverse records - for instance, anyone may claim that the name for their address is &#x27;alice.eth&#x27;. To be certain that the claim is accurate, you must always perform a forward resolution for the returned name and check it matches the original address.</p></div></div>
<p>Most libraries provide functionality for doing reverse resolution:</p>
<div class="mt-4"><div class="flex w-fit border-l border-l-ensl-border" style="margin-bottom:-1px"><button class="p-2 pb-4 border-r border-t border-b bg-white border-ensl-border border-b-ensl-background border-b z-10">ensjs</button><button class="p-2 pb-4 border-r border-t border-b bg-ensl-backgroundSecondary border-ensl-border hover:brightness-105">web3.js</button><button class="p-2 pb-4 border-r border-t border-b bg-ensl-backgroundSecondary border-ensl-border hover:brightness-105">ethjs-ens</button><button class="p-2 pb-4 border-r border-t border-b bg-ensl-backgroundSecondary border-ensl-border hover:brightness-105">ethers.js</button><button class="p-2 pb-4 border-r border-t border-b bg-ensl-backgroundSecondary border-ensl-border hover:brightness-105">go-ens</button><button class="p-2 pb-4 border-r border-t border-b bg-ensl-backgroundSecondary border-ensl-border hover:brightness-105">web3.py</button><button class="p-2 pb-4 border-r border-t border-b bg-ensl-backgroundSecondary border-ensl-border hover:brightness-105">web3j</button></div><div class="border border-ensl-border bg-ensl-background px-6"><div class=""><div><pre><code class="language-javascript">const address = &#x27;0x1234...&#x27;;
let ensName = null;
({ name: ensName } = await ens.getName(address))
// Check to be sure the reverse record is correct. skip check if the name is null
if(ensName == null || address != await ens.name(ensName).getAddress()) {
  ensName = null;
}
</code></pre></div></div><div class="hidden"><div><p>Not supported.</p></div></div><div class="hidden"><div><pre><code class="language-javascript">var address = &#x27;0x1234...&#x27;;
var name = await ens.reverse(address);
// Check to be sure the reverse record is correct.
if(address != await ens.lookup(name)) {
  name = null;
}
</code></pre></div></div><div class="hidden"><div><pre><code>var address = &#x27;0x1234...&#x27;;
var name = await provider.lookupAddress(address);
// ethers.js automatically checks that the forward resolution matches.
</code></pre></div></div><div class="hidden"><div><pre><code class="language-go">name, err := ens.ReverseResolve(client, common.HexToAddress(&quot;0x1234...&quot;)
</code></pre></div></div><div class="hidden"><div><pre><code class="language-python">address = &#x27;0x1234...&#x27;
name = ns.reverse(address)
# Check to be sure the reverse record is correct.
if address != ns.address(name):
  name = None
</code></pre></div></div><div class="hidden"><div><pre><code class="language-java">String address = &quot;0x1234...&quot;;
String name = ens.reverseResolve(address);
// Check to be sure the reverse record is correct.
if(address != ens.resolve(name)) {
  name = null;
}
</code></pre></div></div></div></div>
<p>Reverse resolution without a library follows the same pattern as forward resolution: Get the resolver for <code>1234....addr.reverse</code>(where <em>1234...</em> is the address you want to reverse-resolve), and call the <code>name()</code> function on that resolver. Then, perform a forward resolution to verify the record is accurate.</p>
<p>If you need to process many addresses (eg: showing reverse record of transaction histories), resolving both reverse and forward resolution for each item may not be practical. We have a seperate smart contract called <a href="https://github.com/ensdomains/reverse-records"><code>ReverseRecords</code></a> which allows you to lookup multiple names in one function call.</p>
<pre><code class="language-javascript">const namehash = require(&#x27;eth-ens-namehash&#x27;);
const allnames = await ReverseRecords.getNames([&#x27;0x123&#x27;,&#x27;0x124&#x27;])
const validNames = allnames.filter((n) =&gt; namehash.normalize(n) === n )
</code></pre>
<p>Make sure to compare that the returned names match with the normalised names to prevent from <a href="https://en.wikipedia.org/wiki/IDN_homograph_attack">homograph attack</a> as well as people simply using capital letters.</p><footer class="mt-24"><div class="flex flex-row items-center justify-between"><div><a class="text-lg font-medium p-4 -m-4 no-underline text-gray-600 hover:text-blue-600 flex items-center mr-2" title="Registering-And-Renewing-Names" href="/raw/dapp-developer-guide/registering-and-renewing-names"><svg height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="transform inline flex-shrink-0 rotate-180 mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>Registering-And-Renewing-Names</a></div><div><a class="text-lg font-medium p-4 -m-4 no-underline text-gray-600 hover:text-blue-600 flex items-center ml-2" title="Deploying-Ens-On-A-Private-Chain" href="/raw/deploying-ens-on-a-private-chain">Deploying-Ens-On-A-Private-Chain<svg height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="transform inline flex-shrink-0 ml-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></a></div></div><hr/><div class="mt-24 flex justify-between flex-col-reverse md:flex-row items-center md:items-end"><span class="text-gray-600">GPLv3 <!-- -->2022<!-- --> © ENS Labs</span><div class="mt-6"></div><a class="text-sm" href="https://github.com/ensdomains/docs-v2/blob/main/pages/raw/dapp-developer-guide/resolving-names.mdx" target="_blank">Edit this page on GitHub</a></div></footer></main><div class="w-64 hidden 2xl:block text-sm pl-4"></div></article></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/raw/dapp-developer-guide/resolving-names","query":{},"buildId":"-tOebcYzGItoSYhq_2W0n","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>