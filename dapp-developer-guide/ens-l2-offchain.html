<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="stylesheet" href="https://rsms.me/inter/inter.css"/><title>Untitled — ENS Documentation</title><style>html{font-family:Inter,sans-serif}@supports(font-variation-settings:normal){html{font-family:'Inter var',sans-serif}}</style><meta name="msapplication-TileColor" content="#ffffff"/><meta name="theme-color" content="#ffffff"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="Content-Language" content="en"/><meta name="description" content="ENS Documentation"/><meta name="og:description" content="ENS Documentation"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:image" content="/_next/static/media/og_preview.42aa5db6.png"/><meta name="twitter:site:domain" content="docs.ens.domains"/><meta name="twitter:url" content="https://docs.ens.domains"/><meta name="og:title" content="ENS Domains Documentation"/><meta name="og:image" content="/_next/static/media/og_preview.42aa5db6.png"/><meta name="apple-mobile-web-app-title" content="Nextra"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><meta name="msapplication-TileImage" content="/ms-icon-144x144.png"/><link rel="icon" href="data:image/svg+xml;utf8,&lt;svg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 100 100&#x27;&gt;&lt;text x=&#x27;50&#x27; y=&#x27;.9em&#x27; font-size=&#x27;90&#x27; text-anchor=&#x27;middle&#x27;&gt;X&lt;/text&gt;&lt;style&gt;text{font-family:system-ui,-apple-system,BlinkMacSystemFont,&quot;Segoe UI&quot;,Roboto,&quot;Helvetica Neue&quot;,Arial,&quot;Noto Sans&quot;,sans-serif,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;,&quot;Segoe UI Symbol&quot;,&quot;Noto Color Emoji&quot;;fill:black}@media(prefers-color-scheme:dark){text{fill:white}}&lt;/style&gt;&lt;/svg&gt;"/><meta name="next-head-count" content="24"/><link rel="preload" href="/_next/static/css/1e3632cdbe0436f9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1e3632cdbe0436f9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-a2f72b7de99e853c.js" defer=""></script><script src="/_next/static/chunks/framework-4bac9926a9106dbf.js" defer=""></script><script src="/_next/static/chunks/main-1687c9c53a9f60c1.js" defer=""></script><script src="/_next/static/chunks/pages/_app-112fc7b68113ba25.js" defer=""></script><script src="/_next/static/chunks/8164-38f9d6cc1168934a.js" defer=""></script><script src="/_next/static/chunks/3248-aa7e430f5f048d0f.js" defer=""></script><script src="/_next/static/chunks/pages/dapp-developer-guide/ens-l2-offchain-1705f417e31cc098.js" defer=""></script><script src="/_next/static/asGQ8xzMR6LErz8pSvaoc/_buildManifest.js" defer=""></script><script src="/_next/static/asGQ8xzMR6LErz8pSvaoc/_ssgManifest.js" defer=""></script></head><body class="bg-ensl-backgroundSecondary dark:bg-ensd-backgroundSecondary"><div id="__next" data-reactroot=""><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="nextra-container main-container flex flex-col"><nav class="flex items-center bg-white z-20 fixed top-0 left-0 right-0 h-16 border-b border-gray-200 px-6 dark:bg-dark dark:border-gray-900 bg-opacity-[.97] dark:bg-opacity-100"><div class="h-10 flex flex-shrink-0 items-center mr-4"><a class="h-full flex no-underline text-current items-center hover:opacity-75" href="/"><img src="/_next/static/media/ens_docs_logo.673820b8.svg" alt="ENS Docs" class="h-full"/></a></div><div class="w-full hidden lg:block"><a class="font-bold no-underline whitespace-nowrap mr-4 hidden md:inline-block text-gray-500" href="/governance">Governance</a><a class="font-bold no-underline whitespace-nowrap mr-4 hidden md:inline-block text-gray-500" href="/user">User</a><a class="font-bold no-underline whitespace-nowrap mr-4 hidden md:inline-block text-gray-500" href="/developer">Developer</a><a class="font-bold no-underline whitespace-nowrap mr-4 hidden md:inline-block text-gray-500" href="/technical">Technical</a></div><div class="flex-1"><div class="hidden md:inline-block mr-2"><div class="nextra-search relative w-full md:w-64"><input type="search" class="appearance-none border rounded py-2 px-3 leading-tight focus:outline-none focus:ring w-full" placeholder="Search (&quot;/&quot; to focus)"/></div></div></div><button class="text-current p-2 cursor-pointer" tabindex="0"><svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" shape-rendering="geometricPrecision"></svg></button><a class="text-current p-2" href="https://github.com/ensdomains/docs-v2" target="_blank"><svg height="24" viewBox="2 2 20 20" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 3C7.0275 3 3 7.12937 3 12.2276C3 16.3109 5.57625 19.7597 9.15374 20.9824C9.60374 21.0631 9.77249 20.7863 9.77249 20.5441C9.77249 20.3249 9.76125 19.5982 9.76125 18.8254C7.5 19.2522 6.915 18.2602 6.735 17.7412C6.63375 17.4759 6.19499 16.6569 5.8125 16.4378C5.4975 16.2647 5.0475 15.838 5.80124 15.8264C6.51 15.8149 7.01625 16.4954 7.18499 16.7723C7.99499 18.1679 9.28875 17.7758 9.80625 17.5335C9.885 16.9337 10.1212 16.53 10.38 16.2993C8.3775 16.0687 6.285 15.2728 6.285 11.7432C6.285 10.7397 6.63375 9.9092 7.20749 9.26326C7.1175 9.03257 6.8025 8.08674 7.2975 6.81794C7.2975 6.81794 8.05125 6.57571 9.77249 7.76377C10.4925 7.55615 11.2575 7.45234 12.0225 7.45234C12.7875 7.45234 13.5525 7.55615 14.2725 7.76377C15.9937 6.56418 16.7475 6.81794 16.7475 6.81794C17.2424 8.08674 16.9275 9.03257 16.8375 9.26326C17.4113 9.9092 17.76 10.7281 17.76 11.7432C17.76 15.2843 15.6563 16.0687 13.6537 16.2993C13.98 16.5877 14.2613 17.1414 14.2613 18.0065C14.2613 19.2407 14.25 20.2326 14.25 20.5441C14.25 20.7863 14.4188 21.0746 14.8688 20.9824C16.6554 20.364 18.2079 19.1866 19.3078 17.6162C20.4077 16.0457 20.9995 14.1611 21 12.2276C21 7.12937 16.9725 3 12 3Z" fill="currentColor"></path></svg></a><button class="block md:hidden p-2"><svg fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button><div class="-mr-2"></div></nav><div class="flex flex-1 h-full"><aside class="fixed h-screen bg-ensl-background dark:bg-ensd-backgroundSecondary flex-shrink-0 w-full md:w-64 xl:w-96 md:sticky z-20 hidden md:block" style="top:4rem;height:calc(100vh - 4rem)"><div class="sidebar border-gray-200 dark:border-gray-900 w-full p-4 pb-40 md:pb-16 h-full overflow-y-auto"><div class="mb-4 block md:hidden"><div class="nextra-search relative w-full md:w-64"><input type="search" class="appearance-none border rounded py-2 px-3 leading-tight focus:outline-none focus:ring w-full" placeholder="Search (&quot;/&quot; to focus)"/></div></div><div class="hidden md:block"><ul><li class=""><a href="/">Introduction</a></li><li class=""><a href="/README">Readme</a></li><li class=""><a href="/SUMMARY">Summary</a></li><li class=""><a href="/bug-bounty-program">Bug-Bounty-Program</a></li><li class="active"><button>Contract-API-Reference</button><div style="display:initial"><ul><li class=""><a href="/contract-api-reference/ENS-Contracts-Overview">Ens-Contracts-Overview</a></li><li class=""><a href="/contract-api-reference/dns-registrar">DNS-Registrar</a></li><li class=""><a href="/contract-api-reference/ens">Ens</a></li><li class="active"><button>Eth-Permanent-Registrar</button><div style="display:initial"><ul><li class=""><a href="/contract-api-reference/eth-permanent-registrar/README">Readme</a></li><li class=""><a href="/contract-api-reference/eth-permanent-registrar/controller">Controller</a></li><li class=""><a href="/contract-api-reference/eth-permanent-registrar/registrar">Registrar</a></li></ul></div></li><li class=""><a href="/contract-api-reference/name-processing">Name-Processing</a></li><li class=""><a href="/contract-api-reference/publicresolver">Publicresolver</a></li><li class=""><a href="/contract-api-reference/reverseregistrar">Reverseregistrar</a></li><li class=""><a href="/contract-api-reference/testregistrar">Testregistrar</a></li></ul></div></li><li class="active"><button>Contract-Developer-Guide</button><div style="display:initial"><ul><li class=""><a href="/contract-developer-guide/resolving-names-on-chain">Resolving-Names-On-Chain</a></li><li class=""><a href="/contract-developer-guide/writing-a-registrar">Writing-A-Registrar</a></li><li class=""><a href="/contract-developer-guide/writing-a-resolver">Writing-A-Resolver</a></li></ul></div></li><li class="active"><button>Dapp-Developer-Guide</button><div style="display:initial"><ul><li class=""><a href="/dapp-developer-guide/ens-as-nft">Ens-As-Nft</a></li><li class=""><a href="/dapp-developer-guide/ens-enabling-your-dapp">Ens-Enabling-Your-Dapp</a></li><li class="active"><a href="/dapp-developer-guide/ens-l2-offchain">Ens-L2-Offchain</a></li><li class=""><a href="/dapp-developer-guide/ens-libraries">Ens-Libraries</a></li><li class=""><a href="/dapp-developer-guide/front-end-design-guidelines">Front-End-Design-Guidelines</a></li><li class=""><a href="/dapp-developer-guide/managing-names">Managing-Names</a></li><li class=""><a href="/dapp-developer-guide/registering-and-renewing-names">Registering-And-Renewing-Names</a></li><li class=""><a href="/dapp-developer-guide/resolving-names">Resolving-Names</a></li><li class=""><a href="/dapp-developer-guide/working-with-ens">Working-With-Ens</a></li></ul></div></li><li class=""><a href="/deploying-ens-on-a-private-chain">Deploying-Ens-On-A-Private-Chain</a></li><li class=""><a href="/dns-registrar-guide">DNS-Registrar-Guide</a></li><li class=""><a href="/ens-deployments">Ens-Deployments</a></li><li class="active"><button>Ens-Improvement-Proposals</button><div style="display:initial"><ul><li class=""><a href="/ens-improvement-proposals/README">Readme</a></li><li class=""><a href="/ens-improvement-proposals/ensip-1-ens">Ensip-1-Ens</a></li><li class=""><a href="/ens-improvement-proposals/ensip-10-wildcard-resolution">Ensip-10-Wildcard-Resolution</a></li><li class=""><a href="/ens-improvement-proposals/ensip-11-evmchain-address-resolution">Ensip-11-Evmchain-Address-Resolution</a></li><li class=""><a href="/ens-improvement-proposals/ensip-12-avatar-text-records">Ensip-12-Avatar-Text-Records</a></li><li class=""><a href="/ens-improvement-proposals/ensip-2-initial-hash-registrar">Ensip-2-Initial-Hash-Registrar</a></li><li class=""><a href="/ens-improvement-proposals/ensip-3-reverse-resolution">Ensip-3-Reverse-Resolution</a></li><li class=""><a href="/ens-improvement-proposals/ensip-4-support-for-contract-abis">Ensip-4-Support-For-Contract-Abis</a></li><li class=""><a href="/ens-improvement-proposals/ensip-5-text-records">Ensip-5-Text-Records</a></li><li class=""><a href="/ens-improvement-proposals/ensip-6-dns-in-ens">Ensip-6-DNS-In-Ens</a></li><li class=""><a href="/ens-improvement-proposals/ensip-7-contenthash-field">Ensip-7-Contenthash-Field</a></li><li class=""><a href="/ens-improvement-proposals/ensip-8-interface-discovery">Ensip-8-Interface-Discovery</a></li><li class=""><a href="/ens-improvement-proposals/ensip-9-multichain-address-resolution">Ensip-9-Multichain-Address-Resolution</a></li></ul></div></li><li class="active"><button>Ens-Migration-February-2020</button><div style="display:initial"><ul><li class=""><a href="/ens-migration-february-2020/guide-for-dapp-developers">Guide-For-Dapp-Developers</a></li><li class=""><a href="/ens-migration-february-2020/technical-description">Technical-Description</a></li></ul></div></li><li class=""><a href="/frequently-asked-questions">Frequently-Asked-Questions</a></li><li class=""><a href="/permanent-registrar-faq">Permanent-Registrar-Faq</a></li><li class=""><a href="/terminology">Terminology</a></li></ul></div><div class="md:hidden"><ul><li class=""><a href="/">Introduction</a></li><li class="active"><button>Governance</button><div style="display:initial"><ul><li class=""><a href="/governance">Governance Documentation</a></li></ul></div></li><li class="active"><button>User</button><div style="display:initial"><ul><li class=""><a href="/user">User Documentation</a></li></ul></div></li><li class="active"><button>Developer</button><div style="display:initial"><ul><li class=""><a href="/developer">Developer Documentation</a></li></ul></div></li><li class="active"><button>Technical</button><div style="display:initial"><ul><li class=""><a href="/technical">Technical Documentation</a></li></ul></div></li><li class=""><a href="/README">Readme</a></li><li class=""><a href="/SUMMARY">Summary</a></li><li class=""><a href="/bug-bounty-program">Bug-Bounty-Program</a></li><li class="active"><button>Contract-API-Reference</button><div style="display:initial"><ul><li class=""><a href="/contract-api-reference/ENS-Contracts-Overview">Ens-Contracts-Overview</a></li><li class=""><a href="/contract-api-reference/dns-registrar">DNS-Registrar</a></li><li class=""><a href="/contract-api-reference/ens">Ens</a></li><li class="active"><button>Eth-Permanent-Registrar</button><div style="display:initial"><ul><li class=""><a href="/contract-api-reference/eth-permanent-registrar/README">Readme</a></li><li class=""><a href="/contract-api-reference/eth-permanent-registrar/controller">Controller</a></li><li class=""><a href="/contract-api-reference/eth-permanent-registrar/registrar">Registrar</a></li></ul></div></li><li class=""><a href="/contract-api-reference/name-processing">Name-Processing</a></li><li class=""><a href="/contract-api-reference/publicresolver">Publicresolver</a></li><li class=""><a href="/contract-api-reference/reverseregistrar">Reverseregistrar</a></li><li class=""><a href="/contract-api-reference/testregistrar">Testregistrar</a></li></ul></div></li><li class="active"><button>Contract-Developer-Guide</button><div style="display:initial"><ul><li class=""><a href="/contract-developer-guide/resolving-names-on-chain">Resolving-Names-On-Chain</a></li><li class=""><a href="/contract-developer-guide/writing-a-registrar">Writing-A-Registrar</a></li><li class=""><a href="/contract-developer-guide/writing-a-resolver">Writing-A-Resolver</a></li></ul></div></li><li class="active"><button>Dapp-Developer-Guide</button><div style="display:initial"><ul><li class=""><a href="/dapp-developer-guide/ens-as-nft">Ens-As-Nft</a></li><li class=""><a href="/dapp-developer-guide/ens-enabling-your-dapp">Ens-Enabling-Your-Dapp</a></li><li class="active"><a href="/dapp-developer-guide/ens-l2-offchain">Ens-L2-Offchain</a></li><li class=""><a href="/dapp-developer-guide/ens-libraries">Ens-Libraries</a></li><li class=""><a href="/dapp-developer-guide/front-end-design-guidelines">Front-End-Design-Guidelines</a></li><li class=""><a href="/dapp-developer-guide/managing-names">Managing-Names</a></li><li class=""><a href="/dapp-developer-guide/registering-and-renewing-names">Registering-And-Renewing-Names</a></li><li class=""><a href="/dapp-developer-guide/resolving-names">Resolving-Names</a></li><li class=""><a href="/dapp-developer-guide/working-with-ens">Working-With-Ens</a></li></ul></div></li><li class=""><a href="/deploying-ens-on-a-private-chain">Deploying-Ens-On-A-Private-Chain</a></li><li class=""><a href="/dns-registrar-guide">DNS-Registrar-Guide</a></li><li class=""><a href="/ens-deployments">Ens-Deployments</a></li><li class="active"><button>Ens-Improvement-Proposals</button><div style="display:initial"><ul><li class=""><a href="/ens-improvement-proposals/README">Readme</a></li><li class=""><a href="/ens-improvement-proposals/ensip-1-ens">Ensip-1-Ens</a></li><li class=""><a href="/ens-improvement-proposals/ensip-10-wildcard-resolution">Ensip-10-Wildcard-Resolution</a></li><li class=""><a href="/ens-improvement-proposals/ensip-11-evmchain-address-resolution">Ensip-11-Evmchain-Address-Resolution</a></li><li class=""><a href="/ens-improvement-proposals/ensip-12-avatar-text-records">Ensip-12-Avatar-Text-Records</a></li><li class=""><a href="/ens-improvement-proposals/ensip-2-initial-hash-registrar">Ensip-2-Initial-Hash-Registrar</a></li><li class=""><a href="/ens-improvement-proposals/ensip-3-reverse-resolution">Ensip-3-Reverse-Resolution</a></li><li class=""><a href="/ens-improvement-proposals/ensip-4-support-for-contract-abis">Ensip-4-Support-For-Contract-Abis</a></li><li class=""><a href="/ens-improvement-proposals/ensip-5-text-records">Ensip-5-Text-Records</a></li><li class=""><a href="/ens-improvement-proposals/ensip-6-dns-in-ens">Ensip-6-DNS-In-Ens</a></li><li class=""><a href="/ens-improvement-proposals/ensip-7-contenthash-field">Ensip-7-Contenthash-Field</a></li><li class=""><a href="/ens-improvement-proposals/ensip-8-interface-discovery">Ensip-8-Interface-Discovery</a></li><li class=""><a href="/ens-improvement-proposals/ensip-9-multichain-address-resolution">Ensip-9-Multichain-Address-Resolution</a></li></ul></div></li><li class="active"><button>Ens-Migration-February-2020</button><div style="display:initial"><ul><li class=""><a href="/ens-migration-february-2020/guide-for-dapp-developers">Guide-For-Dapp-Developers</a></li><li class=""><a href="/ens-migration-february-2020/technical-description">Technical-Description</a></li></ul></div></li><li class=""><a href="/frequently-asked-questions">Frequently-Asked-Questions</a></li><li class=""><a href="/permanent-registrar-faq">Permanent-Registrar-Faq</a></li><li class=""><a href="/terminology">Terminology</a></li></ul></div></div></aside><article class="docs-container relative pt-16 pb-16 px-6 md:px-8 w-full max-w-full flex min-w-0"><main class="max-w-screen-md w-full mx-auto pt-4 z-10 min-w-0"><h1>ENS Layer2 and offchain data support</h1>
<h2>Summary</h2>
<p>With the proliferation of layer 2 solutions for Ethereum that are starting to reach maturity, it&#x27;s important that ENS is able to provide resolution services across the entire ecosystem, as well as making it possible for ENS users to take advantage of the efficiencies made possible by Layer 2 solutions. Subsequent to a post by <a href="https://ethereum-magicians.org/t/a-general-purpose-l2-friendly-ens-standard/4591">Vitalik</a> that suggested a possible means for this, the ENS team and the wider ENS and L2 community have been working on a general-purpose &quot;Layer 2 bridge&quot; that makes cross-platform interoperability possible for both ENS and other applications that need to be able to retrieve data from a variety of offchain sources (any data that resides outside of Ethereum Mainnet also known as layer 1/L1. This includes both propriety database and layer 2/L2 solutions such as Optimism, Arbitrum, Starkware, ZKSync, and so on) in a trustless fashion and came up with standards.</p>
<ul>
<li><a href="https://eips.ethereum.org/EIPS/eip-3668">EIP-3668: CCIP Read: Secure offchain data retrieval</a></li>
<li><a href="/ens-improvement-proposals/ensip-10-wildcard-resolution/">ENSIP 10: Wildcard Resolution</a></li>
</ul>
<p><strong>EIP 3668</strong> allows for offchain (including Layer 2/L2) lookups of data in a way that is transparent to clients and provides contract authors to implement whatever validation is necessary; in many cases, this can be provided without any additional trust assumptions over and above those required if data is stored onchain.</p>
<p><strong>ENSIP 10</strong> is a general way to resolve wildcard (eg: *.foo.eth) on L1. Issuing subdomains and moving the resolution of the parent name offchain allows dapps to create subdomains offchain yet make it accessible through L1.</p>
<h2>Steps required for Dapps and wallets to support offchain data lookup.</h2>
<p>If your dapps or wallets use one of those libraries, the EIP 3668 and ENSIP 10 support will be built in, so simply update the library when ready.</p>
<ul>
<li><a href="https://github.com/ethers-io/ethers.js">ethersjs</a></li>
<li><a href="https://github.com/ethereum/web3.js">web3js</a></li>
</ul>
<h3>ethersjs</h3>
<p>5.6.1 supports both EIP3668 and ENSIP 10.</p>
<p>No code change is required as long as your app is interacting with ENS through <a href="https://docs.ethers.io/v5/api/providers/provider/#Provider--ens-methods">etherjs ENS methods</a>.</p>
<p>To try out these features, <code>offchainexample.eth</code> points to so-called &quot;offchain resolver&quot; that fetches data from JSON configuration file hosted on google app engine. It will reply data to any record for offchainexample.eth and its subdomain record such as <code>2.offchainexample.eth</code>. The example resolver is not using L2 data but the same mechanism works when the L2 resolver becomes ready.</p>
<pre><code class="language-js">const { ethers } = require(&quot;ethers&quot;);
const url = `https://mainnet.infura.io/v3/${process.env.API_KEY}`
const provider = new ethers.providers.JsonRpcProvider(url);

async function main(){
  let resolver = await provider.getResolver(&#x27;1.offchainexample.eth&#x27;)
  let address = await provider.resolveName(&#x27;1.offchainexample.eth&#x27;)
  let email = await resolver.getText(&#x27;email&#x27;)
  console.log({resolver:resolver.address, address, email})
}
main()
</code></pre>
<p>The expected output is as follows.</p>
<pre><code class="language-raw">$ node index.js
</code></pre>
<pre><code class="language-js">{
  resolver: &#x27;0xC1735677a60884ABbCF72295E88d47764BeDa282&#x27;,
  address: &#x27;0x41563129cDbbD0c5D3e1c86cf9563926b243834d&#x27;,
  email: &#x27;nick@ens.domains&#x27;
}
</code></pre>
<p><a href="@chainlink/ethers-ccip-read-provider/">@chainlink/ethers-ccip-read-provider</a>(<a href="https://github.com/smartcontractkit/ccip-read/tree/rewrite/packages/ethers-ccip-read-provider">source</a>) also implements EIP 3668 as an independent npm module</p>
<p>The basic usage example is as follows.</p>
<pre><code class="language-js">import { CCIPReadProvider } from &#x27;@chainlink/ethers-ccip-read-provider&#x27;;
import { abi as IExtendedResolver_abi } from &#x27;@ensdomains/offchain-resolver-contracts/artifacts/contracts/IExtendedResolver.sol/IExtendedResolver.json&#x27;;
const IExtendedResolver = new ethers.utils.Interface(IExtendedResolver_abi);
const baseProvider = ethers.getDefaultProvider(options.provider);
const provider = new CCIPReadProvider(baseProvider);
</code></pre>
<p>Please refer to <a href="https://github.com/ensdomains/offchain-resolver/blob/main/packages/client/src/index.ts#L46">offchain resolver client example code</a> for more detail.</p>
<h3>web3js</h3>
<p>Work in progress</p>
<h3>Any other libraries</h3>
<p>If you use other libraries or custom integration, please raise the GitHub issue to the project repo or at <a href="https://github.com/ensdomains/pm/issues">ENS project management repo</a> if the equivalent repo does not exist so that ENS team can keep track of the progress.</p>
<h2>Steps required for Dapps and wallets to issue subdomains offchain</h2>
<p>If you wish to issue subdomains using offchain data storage, please follow <a href="https://github.com/ensdomains/offchain-resolver">offchain resolver</a> as a reference point. The example uses a flat file as a data source but can easily be replaced with database calls.</p>
<p>L2 support is still a work in progress.</p>
<h2>FAQ</h2>
<h3>Is the change backwards compatible?</h3>
<p>Yes. The existing names on L1 will continue working without clients nor applications supporting these standards. Only names that are outside of L1 will not be resolved.</p>
<h3>Will L2/offchain data be supported by GraphQL?</h3>
<p>Once each L2 is officially supported, we will need to spin up a subgraph for each L2 bridge, and we will use schema stitching to make using them transparent to callers.</p>
<p>For names that are not hosted on a supported L2, we won&#x27;t be able to fetch data that are normally only available on the subgraph</p>
<h3>How do you support other EVM compatible chains?</h3>
<p>Non-L2 chains lack ways to verify data on L1 in the trustless manner. The alternative is for chain bridge operators to act as a trusted third-party and hosts the offchain gateway, or individual dapps hosts own gateway and sign each data with the private key of the ENS name.</p>
<h3>Can I issue a new tld unique to an offchain environment?</h3>
<p>No. Please read <a href="https://medium.com/the-ethereum-name-service/why-ens-doesnt-create-more-tlds-responsible-citizenship-in-the-global-namespace-7e66658fe2b1">&quot;Why ENS Doesn&#x27;t Create More TLDs: Responsible Citizenship in the Global Namespace&quot;</a> for more detail</p>
<h3>Can I set a primary name to names on offchain?</h3>
<p>Yes, you can. However, reverse registrar (it is a hidden top-level domain starting with .addr.reverse) currently resides on L1; hence you have to pay gas on L1. We may consider moving the reverse registrar to L2 in future.</p>
<h3>Can I register .eth name on offchain?</h3>
<p>Only when we migrate .eth name to a specific L2 as one of the last steps of our migration after finding out which L2 supports ENS integration the best.</p>
<h3>How do I handle contract addresses?</h3>
<p>Unlike EOA (Externally Owned Account), contract based accounts such as multisig may only be accessible in certain chains. <a href="ens-improvement-proposals/ensip-11-evmchain-address-resolution.md">ENSIP-11</a> allows a single name to hold different addresses across multiple EVM compatible chains and recommendation is to store contract addresses to EVM chain specific address record field.</p>
<h3>Can I use libraries from other name services that support .eth?</h3>
<p><code>@unstoppabledomains/resolution</code> removed <a href="https://github.com/unstoppabledomains/resolution/releases/tag/v7.0.0">ENS support as of December 2021</a>. Other services tend not to support all ENS TLDs especially DNS based TLDs (.com, .net, etc) so we advise not to rely on these libraries resolving ENS names.</p>
<h2>References and previous discussions</h2>
<ul>
<li><a href="https://medium.com/the-ethereum-name-service/mvp-of-ens-on-l2-with-optimism-demo-video-how-to-try-it-yourself-b44c390cbd67">MVP of ENS on L2 with Optimism: Demo Video + How to Try It Yourself</a></li>
<li><a href="https://medium.com/the-ethereum-name-service/a-general-purpose-bridge-for-ethereum-layer-2s-e28810ec1d88">A general-purpose bridge for Ethereum Layer 2s</a></li>
<li><a href="https://ethereum-magicians.org/t/a-general-purpose-l2-friendly-ens-standard/4591">A general-purpose L2-friendly ENS standard</a></li>
<li><a href="https://www.youtube.com/watch?v=L9N7U_bNmOU">Video: ENS Workshop on 18th Oct 2021</a></li>
<li><a href="https://www.youtube.com/watch?v=9DdL7AQgXTM">Video: ENS Workshop on 6th April 2021</a></li>
<li><a href="https://www.youtube.com/watch?v=QwEiAedSNYI">Video: ENS on Layer 2 meeting #2 on 28th Oct 2020</a></li>
<li><a href="https://www.youtube.com/watch?v=vloI0VT8DXE">Video: ENS on Layer 2 meeting on 13th Oct 2020</a></li>
<li><a href="https://www.youtube.com/watch?v=65z_j4n8mTk&amp;t=2s">Video: ENS workshop on 29th Sep 2020</a></li>
</ul><footer class="mt-24"><div class="flex flex-row items-center justify-between"><div><a class="text-lg font-medium p-4 -m-4 no-underline text-gray-600 hover:text-blue-600 flex items-center mr-2" title="Ens-Enabling-Your-Dapp" href="/dapp-developer-guide/ens-enabling-your-dapp"><svg height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="transform inline flex-shrink-0 rotate-180 mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>Ens-Enabling-Your-Dapp</a></div><div><a class="text-lg font-medium p-4 -m-4 no-underline text-gray-600 hover:text-blue-600 flex items-center ml-2" title="Ens-Libraries" href="/dapp-developer-guide/ens-libraries">Ens-Libraries<svg height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="transform inline flex-shrink-0 ml-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></a></div></div><hr/><div class="mt-24 flex justify-between flex-col-reverse md:flex-row items-center md:items-end"><span class="text-gray-600">GPLv3 <!-- -->2022<!-- --> © ENS Labs</span><div class="mt-6"></div><a class="text-sm" href="https://github.com/ensdomains/docs-v2/blob/main/pages/dapp-developer-guide/ens-l2-offchain.mdx" target="_blank">Edit this page on GitHub</a></div></footer></main><div class="w-64 hidden 2xl:block text-sm pl-4"></div></article></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/dapp-developer-guide/ens-l2-offchain","query":{},"buildId":"asGQ8xzMR6LErz8pSvaoc","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>