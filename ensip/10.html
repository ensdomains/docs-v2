<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>ENSIP-10: Wildcard Resolution - ENS Documentation</title><meta name="description" content="Provides a mechanism to support wildcard resolution of ENS names (formerly EIP-2544)."/><meta name="next-head-count" content="4"/><script>
  let darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)')

  updateMode()
  darkModeMediaQuery.addEventListener('change', updateModeWithoutTransitions)
  window.addEventListener('storage', updateModeWithoutTransitions)

  function updateMode() {
    let isSystemDarkMode = darkModeMediaQuery.matches
    let isDarkMode = window.localStorage.isDarkMode === 'true' || (!('isDarkMode' in window.localStorage) && isSystemDarkMode)

    if (isDarkMode) {
      document.documentElement.classList.add('dark')
    } else {
      document.documentElement.classList.remove('dark')
    }

    if (isDarkMode === isSystemDarkMode) {
      delete window.localStorage.isDarkMode
    }
  }

  function disableTransitionsTemporarily() {
    document.documentElement.classList.add('[&_*]:!transition-none')
    window.setTimeout(() => {
      document.documentElement.classList.remove('[&_*]:!transition-none')
    }, 0)
  }

  function updateModeWithoutTransitions() {
    disableTransitionsTemporarily()
    updateMode()
  }
</script><meta name="theme-color" content="#5298FF"/><link rel="preload" href="/_next/static/css/d3760ff4cd7578ac.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d3760ff4cd7578ac.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-cefddfb7403e4fd5.js" defer=""></script><script src="/_next/static/chunks/framework-15c4545a853bb4ff.js" defer=""></script><script src="/_next/static/chunks/main-a664b3180cf41d6f.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a014f3c03cbad33b.js" defer=""></script><script src="/_next/static/chunks/pages/ensip/10-592455eb1f9514bb.js" defer=""></script><script src="/_next/static/syAM8c0Bjlk2yoKNrunzk/_buildManifest.js" defer=""></script><script src="/_next/static/syAM8c0Bjlk2yoKNrunzk/_ssgManifest.js" defer=""></script></head><body class="bg-[#f7f7f7] antialiased dark:bg-zinc-900"><div id="__next"><div class="lg:ml-72 xl:ml-80"><header class="lheader fixed inset-0 top-14 left-0 z-40 contents w-72 overflow-y-auto border-r-0 border-zinc-900/10 px-6 pt-2 pb-8 dark:border-white/10 lg:block xl:w-80"><div class="fixed inset-x-0 top-0 z-50 flex h-14 items-center justify-start gap-6 px-4 transition sm:px-6 lg:z-30 lg:px-4 md:shadow-2xl backdrop-blur-sm dark:backdrop-blur left-0 bg-white/[var(--bg-opacity-light)] dark:bg-zinc-900/[var(--bg-opacity-dark)]" style="--bg-opacity-light:0.5;--bg-opacity-dark:0.2"><div class="absolute hidden md:flex top-full left-0 right-0 text-white px-4 bg-ens-500"><a class="font-bold py-1 px-3 text-xs hover:bg-white/10" href="/">Intro</a><a class="font-bold py-1 px-3 text-xs hover:bg-white/10" href="/web">dApp Developer</a><a class="font-bold py-1 px-3 text-xs hover:bg-white/10" href="/resolvers">Resolution</a><a class="font-bold py-1 px-3 text-xs hover:bg-white/10 bg-black/10" href="/standards">Records &amp; Standardization</a></div><div class="flex items-center gap-5 lg:hidden"><button type="button" class="flex h-6 w-6 items-center justify-center rounded-md transition hover:bg-zinc-900/5 dark:hover:bg-white/5" aria-label="Toggle navigation"><svg viewBox="0 0 10 9" fill="none" stroke-linecap="round" aria-hidden="true" class="w-4 stroke-zinc-900 dark:stroke-white"><path d="M.5 1h9M.5 8h9M.5 4.5h9"></path></svg></button><a aria-label="Home" href="/"><img alt="ENS Logo" src="/_next/static/media/logo.7b7e0018.svg" width="72" height="32" decoding="async" data-nimg="1" class="h-8" loading="lazy" style="color:transparent"/></a></div><div class="hidden lg:flex w-fit"><a aria-label="Home" href="/"><img alt="ENS Logo" src="/_next/static/media/mark.c13fa206.svg" width="32" height="32" decoding="async" data-nimg="1" class="h-8 ml-1 fill-ens-dao-400" loading="lazy" style="color:transparent"/></a></div><div class="absolute inset-x-0 top-full h-px transition bg-zinc-900/7.5 dark:bg-white/7.5"></div><div class="hidden lg:block lg:max-w-md lg:flex-auto"><button type="button" class="hidden h-8 w-full items-center gap-2 rounded-lg bg-white pl-2 pr-3 text-sm text-zinc-500 ring-1 ring-zinc-900/10 transition hover:ring-zinc-900/20 dark:bg-white/5 dark:text-zinc-400 dark:ring-inset dark:ring-white/10 dark:hover:ring-white/20 lg:flex focus:[&amp;:not(:focus-visible)]:outline-none"><svg viewBox="0 0 20 20" fill="none" aria-hidden="true" class="h-5 w-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" d="M12.01 12a4.25 4.25 0 1 0-6.02-6 4.25 4.25 0 0 0 6.02 6Zm0 0 3.24 3.25"></path></svg>Find something...<kbd class="ml-auto text-2xs text-zinc-400 dark:text-zinc-500"><kbd class="font-sans"></kbd><kbd class="font-sans">K</kbd></kbd></button></div><div class="h-full w-auto grow"></div><div class="flex gap-4 items-center"><div class="hidden min-[786px]:flex gap-2"><a target="_blank" class="inline-flex gap-0.5 justify-center overflow-hidden text-sm font-medium transition rounded-lg py-1 px-3 bg-ens-400/10 text-ens-600 ring-1 ring-inset ring-ens-400/20 hover:bg-ens-400/10 hover:text-ens-300 hover:ring-ens-300 dark:bg-ens-400/10 dark:text-ens-400 dark:ring-1 dark:ring-inset dark:ring-ens-400/20 dark:hover:bg-ens-400/10 dark:hover:text-ens-300 dark:hover:ring-ens-300" href="https://app.ens.domains?ref=ens-docs-v2">App</a><a class="inline-flex gap-0.5 justify-center overflow-hidden text-sm font-medium transition rounded-lg py-1 px-3 bg-ens-400/10 text-ens-600 ring-1 ring-inset ring-ens-400/20 hover:bg-ens-400/10 hover:text-ens-300 hover:ring-ens-300 dark:bg-ens-400/10 dark:text-ens-400 dark:ring-1 dark:ring-inset dark:ring-ens-400/20 dark:hover:bg-ens-400/10 dark:hover:text-ens-300 dark:hover:ring-ens-300" href="/dao">DAO Docs</a></div><div class="hidden md:block md:h-5 md:w-px md:bg-zinc-900/10 md:dark:bg-white/15"></div><div class="flex gap-4"><div class="contents lg:hidden"><button type="button" class="flex h-6 w-6 items-center justify-center rounded-md transition hover:bg-zinc-900/5 dark:hover:bg-white/5 lg:hidden focus:[&amp;:not(:focus-visible)]:outline-none" aria-label="Find something..."><svg viewBox="0 0 20 20" fill="none" aria-hidden="true" class="h-5 w-5 stroke-zinc-900 dark:stroke-white"><path stroke-linecap="round" stroke-linejoin="round" d="M12.01 12a4.25 4.25 0 1 0-6.02-6 4.25 4.25 0 0 0 6.02 6Zm0 0 3.24 3.25"></path></svg></button></div><a target="_blank" href="https://github.com/ensdomains/docs-v2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="opacity-90 hover:opacity-100" height="1.4rem" width="1.4rem" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></div></div></div><nav class="hidden lg:mt-8 lg:block"><ul><li class="relative mt-6 md:mt-0"><h2 class="text-xs font-semibold text-zinc-900 dark:text-white"></h2><div class="relative mt-3 pl-2"><div class="absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"></div><ul class="border-l border-transparent"><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/standards"><span class="truncate flex gap-1 items-center"><span>👋 Welcome</span></span></a></li></ul></div></li><li class="relative mt-6"><h2 class="text-xs font-semibold text-zinc-900 dark:text-white">💾 Records</h2><div class="relative mt-3 pl-2"><div class="absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"></div><ul class="border-l border-transparent"><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/records/quickstart"><span class="truncate flex gap-1 items-center"><span>⚡ Quickstart</span></span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/records"><span class="truncate flex gap-1 items-center"><span>💾 Record Types and Standards</span></span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/records/modify"><span class="truncate flex gap-1 items-center"><span>✍️ Modifying Records</span></span></a></li></ul></div></li><li class="relative mt-6"><h2 class="text-xs font-semibold text-zinc-900 dark:text-white">📖 Improvement Proposals (ENSIPs)</h2><div class="relative mt-3 pl-2"><div class="absolute inset-x-0 top-0 bg-zinc-800/2.5 will-change-transform dark:bg-white/2.5" style="border-radius:8px;height:32px;top:320px;opacity:0"></div><div class="absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"></div><div class="absolute left-2 h-6 w-px bg-ens-500" style="top:324px;opacity:1"></div><ul class="border-l border-transparent"><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/ensip"><span class="truncate flex gap-1 items-center"><span>🧑‍🏫 Explained</span></span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/ensip/1"><span class="truncate flex gap-1 items-center"><span>1 - ENS</span></span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/ensip/2"><span class="truncate flex gap-1 items-center"><span>2 - Hash Registrar</span></span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/ensip/3"><span class="truncate flex gap-1 items-center"><span>3 - Reverse Resolution</span></span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/ensip/4"><span class="truncate flex gap-1 items-center"><span>4 - Contract ABIs</span></span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/ensip/5"><span class="truncate flex gap-1 items-center"><span>5 - Text Records</span></span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/ensip/6"><span class="truncate flex gap-1 items-center"><span>6 - DNS-in-ENS</span></span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/ensip/7"><span class="truncate flex gap-1 items-center"><span>7 - Contenthash</span></span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/ensip/8"><span class="truncate flex gap-1 items-center"><span>8 - Interface Discovery</span></span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/ensip/9"><span class="truncate flex gap-1 items-center"><span>9 - Multichain Addresses</span></span></a></li><li class="relative"><a aria-current="page" class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-900 dark:text-white" href="/ensip/10"><span class="truncate flex gap-1 items-center"><span>10 - Wildcard Resolution</span></span></a><ul role="list" style="opacity:1"><li><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-7 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/ensip/10#abstract"><span class="truncate flex gap-1 items-center">Abstract</span></a></li><li><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-7 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/ensip/10#motivation"><span class="truncate flex gap-1 items-center">Motivation</span></a></li><li><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-7 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/ensip/10#specification"><span class="truncate flex gap-1 items-center">Specification</span></a></li><li><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-7 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/ensip/10#rationale"><span class="truncate flex gap-1 items-center">Rationale</span></a></li><li><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-7 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/ensip/10#backwards-compatibility"><span class="truncate flex gap-1 items-center">Backwards Compatibility</span></a></li><li><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-7 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/ensip/10#security-considerations"><span class="truncate flex gap-1 items-center">Security Considerations</span></a></li><li><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-7 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/ensip/10#copyright"><span class="truncate flex gap-1 items-center">Copyright</span></a></li></ul></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/ensip/11"><span class="truncate flex gap-1 items-center"><span>11 - EVM Compatible Chain Address</span></span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/ensip/12"><span class="truncate flex gap-1 items-center"><span>12 - Avatar Text Records</span></span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/ensip/13"><span class="truncate flex gap-1 items-center"><span>13 - SAFE Authentication</span></span></a></li><li class="relative"><a class="flex justify-between gap-2 py-1 pr-3 text-sm transition pl-4 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white" href="/ensip/14"><span class="truncate flex gap-1 items-center"><span>14 - On-chain Source Parameter</span></span></a></li></ul></div></li></ul></nav></header><div class="relative px-4 pt-14 sm:px-6 lg:px-8"><main class="py-16"><article class="prose dark:prose-invert"><h1>ENSIP-10: Wildcard Resolution</h1>
<table><thead><tr><th><strong>Author</strong></th><th>Nick Johnson &lt;<a href="mailto:nick@ens.domains">nick@ens.domains</a>&gt;, 0age (@0age)</th></tr></thead><tbody><tr><td><strong>Status</strong></td><td>Draft</td></tr><tr><td><strong>Submitted</strong></td><td>2020-02-28</td></tr></tbody></table>
<h2 id="abstract" class="mt-8 scroll-mt-32 flex justify-between items-center w-full"><a class="group text-inherit no-underline hover:text-inherit" href="/ensip/10#abstract">Abstract</a><div></div></h2>
<p>The Ethereum Name Service Specification (ENSIP-1) establishes a two-step name resolution process. First, an ENS client performs the namehash algorithm on the name to determine the associated &quot;node&quot;, and supplies that node to the ENS Registry contract to determine the resolver. Then, if a resolver has been set on the Registry, the client supplies that same node to the resolver contract, which will return the associated address or other record.</p>
<p>As currently specified, this process terminates if a resolver is not set on the ENS Registry for a given node. This ENSIP changes the name resolution process by adding an additional step if a resolver is not set for a domain. This step strips out the leftmost label from the name, derives the node of the new fragment, and supplies that node to the ENS Registry. If a resolver is located for that node, the client supplies the original, complete node to that resolver contract to derive the relevant records. This step is repeated until a node with a resolver is found.</p>
<p>Further, this specification defines a new way for resolvers to resolve names, using a unified <code>resolve()</code> method that permits more flexible handling of name resolution.</p>
<h2 id="motivation" class="mt-8 scroll-mt-32 flex justify-between items-center w-full"><a class="group text-inherit no-underline hover:text-inherit" href="/ensip/10#motivation">Motivation</a><div></div></h2>
<p>Many applications such as wallet providers, exchanges, and dapps have expressed a desire to issue ENS names for their users via custom subdomains on a shared parent domain. However, the cost of doing so is currently prohibitive for large user bases, as a distinct record must be set on the ENS Registry for each subdomain.</p>
<p>Furthermore, users cannot immediately utilize these subdomains upon account creation, as the transaction to assign a resolver for the node of the subdomain must first be submitted and mined on-chain. This adds unnecessary friction when onboarding new users, who coincidentally would often benefit greatly from the usability improvements afforded by an ENS name.</p>
<p>Enabling wildcard support allows for the design of more advanced resolvers that deterministically generate addresses and other records for unassigned subdomains. The generated addresses could map to counterfactual contract deployment addresses (i.e. <code>CREATE2</code> addresses), to designated &quot;fallback&quot; addresses, or other schemes. Additionally, individual resolvers would still be assignable to any given subdomain, which would supersede the wildcard resolution using the parent resolver.</p>
<p>Another critical motivation with this standard is to enable wildcard resolution in a backwards-compatible fashion. It does not require modifying the current ENS Registry contract or any existing resolvers, and continues to support existing ENS records — legacy ENS clients would simply fail to resolve wildcard records.</p>
<h2 id="specification" class="mt-8 scroll-mt-32 flex justify-between items-center w-full"><a class="group text-inherit no-underline hover:text-inherit" href="/ensip/10#specification">Specification</a><div></div></h2>
<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in RFC 2119.</p>
<p>Let:</p>
<ul>
<li><code>namehash</code> be the algorithm defined in ENSIP-1.</li>
<li><code>dnsencode</code> be the process for encoding DNS names specified in section 3.1 of RFC1035, with the exception that there is no limit on the total length of the encoded name. The empty string is encoded identically to the name &#x27;.&#x27;, as a single 0-octet.</li>
<li><code>parent</code> be a function that removes the first label from a name (eg, <code>parent(&#x27;foo.eth&#x27;) = &#x27;eth&#x27;</code>). <code>parent(&#x27;tld&#x27;)</code> is defined as the empty string &#x27;&#x27;.</li>
<li><code>ens</code> is the ENS registry contract for the current network.</li>
</ul>
<p>ENSIP-10-compliant ENS resolvers MAY implement the following function interface:</p>
<div class="not-prose my-6 overflow-hidden rounded-lg bg-[--var(--shiki-color-background)] shadow-sm dark:shadow-md ring-1 ring-black/10 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-black"><code>interface ExtendedResolver {
    function resolve(bytes calldata name, bytes calldata data) external view returns(bytes);
}
</code></pre><button type="button" class="group/button absolute top-3.5 right-4 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-ens-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<p>If a resolver implements this function, it MUST return true when <code>supportsInterface()</code> is called on it with the interface&#x27;s ID, <code>0x9061b923</code>.</p>
<p>ENS clients will call <code>resolve</code> with the DNS-encoded name to resolve and the encoded calldata for a resolver function (as specified in ENSIP-1 and elsewhere); the function MUST either return valid return data for that function, or revert if it is not supported.</p>
<p>ENSIP-10-compliant ENS clients MUST perform the following procedure when determining the resolver for a given name:</p>
<ol>
<li>Set <code>currentname = name</code></li>
<li>Set <code>resolver = ens.resolver(namehash(currentname))</code></li>
<li>If <code>resolver</code> is not the zero address, halt and return <code>resolver</code>.</li>
<li>If <code>currentname</code> is the empty name (&#x27;&#x27; or &#x27;.&#x27;), halt and return null.</li>
<li>Otherwise, set <code>currentname = parent(currentname)</code> and go to 2.</li>
</ol>
<p>If the procedure above returns null, name resolution MUST terminate unsuccessfully. Otherwise, ENSIP-10-compliant ENS clients MUST perform the following procedure when resolving a record:</p>
<ol>
<li>Set <code>calldata</code> to the ABI-encoded call data for the resolution function required - for example, the ABI encoding of <code>addr(namehash(name))</code> when resolving the <code>addr</code> record.</li>
<li>Set <code>supportsENSIP10 = resolver.supportsInterface(&#x27;0x9061b923&#x27;)</code>.</li>
<li>If <code>supportsENSIP10</code> is true, set <code>result = resolver.resolve(dnsencode(name), calldata)</code></li>
<li>If <code>supportsENSIP10</code> is false and <code>name == currentname</code>, set <code>result</code> to the result of calling <code>resolver</code> with <code>calldata</code>.</li>
<li>If neither 3 nor 4 are true, terminate unsuccessfully.</li>
<li>Return <code>result</code> after decoding it using the return data ABI of the corresponding resolution function (eg, for <code>addr()</code>, ABI-decode the result of <code>resolver.resolve()</code> as an <code>address</code>).</li>
</ol>
<p>Note that in all cases the resolution function (<code>addr()</code> etc) and the <code>resolve</code> function are supplied the original <code>name</code>, <em>not</em> the <code>currentname</code> found in the first stage of resolution.</p>
<p>Also note that when wildcard resolution is in use (eg, <code>name != currentname</code>), clients MUST NOT call legacy methods such as <code>addr</code> to resolve the name. These methods may only be called on resolvers set on an exact match for <code>name</code>.</p>
<h3>Pseudocode</h3>
<div class="not-prose my-6 overflow-hidden rounded-lg bg-[--var(--shiki-color-background)] shadow-sm dark:shadow-md ring-1 ring-black/10 dark:ring-white/10"><div class="group dark:bg-white/2.5"><div class="relative"><pre class="overflow-x-auto p-4 text-xs text-black"><code>function getResolver(name) {
    for(let currentname = name; currentname !== ''; currentname = parent(currentname)) {
        const node = namehash(currentname);
        const resolver = ens.resolver(node);
        if(resolver != '0x0000000000000000000000000000000000000000') {
            return [resolver, currentname];
        }
    }
    return [null, ''];
}

function resolve(name, func, ...args) {
    const [resolver, resolverName] = getResolver(name);
    if(resolver === null) {
        return null;
    }
    const supportsENSIP10 = resolver.supportsInterface('0x9061b923');
    if(supportsENSIP10) {
        const calldata = resolver[func].encodeFunctionCall(namehash(name), ...args);
        const result = resolver.resolve(dnsencode(name), calldata);
        return resolver[func].decodeReturnData(result);
    } else if(name == resolverName) {
        return resolver[func](...args);
    } else {
        return null;
    }
}
</code></pre><button type="button" class="group/button absolute top-3.5 right-4 overflow-hidden rounded-full py-1 pl-2 pr-3 text-2xs font-medium opacity-0 backdrop-blur transition focus:opacity-100 group-hover:opacity-100 bg-white/5 hover:bg-white/7.5 dark:bg-white/2.5 dark:hover:bg-white/5"><span aria-hidden="false" class="pointer-events-none flex items-center gap-0.5 text-zinc-400 transition duration-300"><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-500/20 stroke-zinc-500 transition-colors group-hover/button:stroke-zinc-400"><path stroke-width="0" d="M5.5 13.5v-5a2 2 0 0 1 2-2l.447-.894A2 2 0 0 1 9.737 4.5h.527a2 2 0 0 1 1.789 1.106l.447.894a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2Z"></path><path fill="none" stroke-linejoin="round" d="M12.5 6.5a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2m5 0-.447-.894a2 2 0 0 0-1.79-1.106h-.527a2 2 0 0 0-1.789 1.106L7.5 6.5m5 0-1 1h-3l-1-1"></path></svg>Copy</span><span aria-hidden="true" class="pointer-events-none absolute inset-0 flex items-center justify-center text-ens-400 transition duration-300 translate-y-1.5 opacity-0">Copied!</span></button></div></div></div>
<h2 id="rationale" class="mt-8 scroll-mt-32 flex justify-between items-center w-full"><a class="group text-inherit no-underline hover:text-inherit" href="/ensip/10#rationale">Rationale</a><div></div></h2>
<p>The proposed implementation supports wildcard resolution in a manner that minimizes the impact to existing systems. It also reuses existing algorithms and procedures to the greatest possible extent, thereby easing the burden placed on authors and maintainers of various ENS clients.</p>
<p>It also recognizes an existing consensus concerning the desirability of wildcard resolution for ENS, enabling more widespread adoption of the original specification by solving for a key scalability obstacle.</p>
<p>While introducing an optional <code>resolve</code> function for resolvers, taking the unhashed name and calldata for a resolution function increases implementation complexity, it provides a means for resolvers to obtain plaintext labels and act accordingly, which enables many wildcard-related use-cases that would otherwise not be possible - for example, a wildcard resolver could resolve <code>id.nifty.eth</code> to the owner of the NFT with id <code>id</code> in some collection. With only namehashes to work with, this is not possible.</p>
<p>The DNS wire format is used for encoding names as it permits quick and gas-efficient hashing of names, as well as other common operations such as fetching or removing individual labels; in contrast, dot-separated names require iterating over every character in the name to find the delimiter.</p>
<h2 id="backwards-compatibility" class="mt-8 scroll-mt-32 flex justify-between items-center w-full"><a class="group text-inherit no-underline hover:text-inherit" href="/ensip/10#backwards-compatibility">Backwards Compatibility</a><div></div></h2>
<p>Existing ENS clients that are compliant with ENSIP-1 will fail to resolve wildcard records and refuse to interact with them, while those compliant with ENSIP-10 will continue to correctly resolve, or reject, existing ENS records. Resolvers wishing to implement the new <code>resolve</code> function for non-wildcard use-cases (eg, where the resolver is set directly on the name being resolved) should consider what to return to legacy clients that call the individual resolution functions for maximum compatibility.</p>
<p>Requiring clients to avoid calling existing resolution functions (eg, <code>addr</code> etc) on wildcard resolvers prevents inadvertant backwards compatiability issues with resolvers that answer queries for all names.</p>
<h2 id="security-considerations" class="mt-8 scroll-mt-32 flex justify-between items-center w-full"><a class="group text-inherit no-underline hover:text-inherit" href="/ensip/10#security-considerations">Security Considerations</a><div></div></h2>
<p>While compliant ENS clients will continue to refuse to resolve records without a resolver, there is still the risk that an improperly-configured client will refer to an incorrect resolver, or will not reject interactions with the null address when a resolver cannot be located.</p>
<p>Additionally, resolvers supporting completely arbitrary wildcard subdomain resolution will increase the likelihood of funds being sent to unintended recipients as a result of typos. Applications that implement such resolvers should consider making additional name validation available to clients depending on the context, or implementing features that support recoverability of funds.</p>
<p>There is also the possibility that some applications might require that no resolver be set for certain subdomains. For this to be problematic, the parent domain would need to successfully resolve the given subdomain node — to the knowledge of the authors, no application currently supports this feature or expects that subdomains should not resolve to a record.</p>
<h2 id="copyright" class="mt-8 scroll-mt-32 flex justify-between items-center w-full"><a class="group text-inherit no-underline hover:text-inherit" href="/ensip/10#copyright">Copyright</a><div></div></h2>
<p>Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>.</p></article></main><footer class="mx-auto max-w-2xl space-y-10 pb-16 lg:max-w-5xl"><div class="relative h-8"><form class="absolute inset-0 flex items-center justify-center gap-6 md:justify-start"><p class="text-sm text-zinc-600 dark:text-zinc-400">Was this page helpful?</p><div class="group grid h-8 grid-cols-[1fr,1px,1fr] overflow-hidden rounded-full border border-zinc-900/10 dark:border-white/10"><button type="submit" class="px-3 text-sm font-medium text-zinc-600 transition hover:bg-zinc-900/2.5 hover:text-zinc-900 dark:text-zinc-400 dark:hover:bg-white/5 dark:hover:text-white" data-response="yes">Yes</button><div class="bg-zinc-900/10 dark:bg-white/10"></div><button type="submit" class="px-3 text-sm font-medium text-zinc-600 transition hover:bg-zinc-900/2.5 hover:text-zinc-900 dark:text-zinc-400 dark:hover:bg-white/5 dark:hover:text-white" data-response="no">No</button></div></form></div><div class="flex"><div class="flex flex-col items-start gap-3"><a class="inline-flex gap-0.5 justify-center overflow-hidden text-sm font-medium transition rounded-lg bg-zinc-100 py-1 px-3 text-zinc-900 hover:bg-zinc-200 dark:bg-zinc-800/40 dark:text-zinc-400 dark:ring-1 dark:ring-inset dark:ring-zinc-800 dark:hover:bg-zinc-800 dark:hover:text-zinc-300" aria-label="Previous: 9 - Multichain Addresses" href="/ensip/9"><svg viewBox="0 0 20 20" fill="none" aria-hidden="true" class="mt-0.5 h-5 w-5 -ml-1 rotate-180"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="m11.5 6.5 3 3.5m0 0-3 3.5m3-3.5h-9"></path></svg>Previous</a><a tabindex="-1" aria-hidden="true" class="text-base font-semibold text-zinc-900 transition hover:text-zinc-600 dark:text-white dark:hover:text-zinc-300" href="/ensip/9">9 - Multichain Addresses</a></div><div class="ml-auto flex flex-col items-end gap-3"><a class="inline-flex gap-0.5 justify-center overflow-hidden text-sm font-medium transition rounded-lg bg-zinc-100 py-1 px-3 text-zinc-900 hover:bg-zinc-200 dark:bg-zinc-800/40 dark:text-zinc-400 dark:ring-1 dark:ring-inset dark:ring-zinc-800 dark:hover:bg-zinc-800 dark:hover:text-zinc-300" aria-label="Next: 11 - EVM Compatible Chain Address" href="/ensip/11">Next<svg viewBox="0 0 20 20" fill="none" aria-hidden="true" class="mt-0.5 h-5 w-5 -mr-1"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="m11.5 6.5 3 3.5m0 0-3 3.5m3-3.5h-9"></path></svg></a><a tabindex="-1" aria-hidden="true" class="text-base font-semibold text-zinc-900 transition hover:text-zinc-600 dark:text-white dark:hover:text-zinc-300" href="/ensip/11">11 - EVM Compatible Chain Address</a></div></div><div class="flex flex-col items-center justify-between gap-5 border-t border-zinc-900/5 pt-8 dark:border-white/5 sm:flex-row"><p class="text-xs text-zinc-600 dark:text-zinc-400">© Copyright <!-- -->2023<!-- -->. All rights reserved.</p><div class="flex gap-4"><a class="group" href="/ensip/10#"><span class="sr-only">Follow us on Twitter</span><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-700 transition group-hover:fill-zinc-900 dark:group-hover:fill-zinc-500"><path d="M16.712 6.652c.01.146.01.29.01.436 0 4.449-3.267 9.579-9.242 9.579v-.003a8.963 8.963 0 0 1-4.98-1.509 6.379 6.379 0 0 0 4.807-1.396c-1.39-.027-2.608-.966-3.035-2.337.487.097.99.077 1.467-.059-1.514-.316-2.606-1.696-2.606-3.3v-.041c.45.26.956.404 1.475.42C3.18 7.454 2.74 5.486 3.602 3.947c1.65 2.104 4.083 3.382 6.695 3.517a3.446 3.446 0 0 1 .94-3.217 3.172 3.172 0 0 1 4.596.148 6.38 6.38 0 0 0 2.063-.817 3.357 3.357 0 0 1-1.428 1.861 6.283 6.283 0 0 0 1.865-.53 6.735 6.735 0 0 1-1.62 1.744Z"></path></svg></a><a class="group" href="/ensip/10#"><span class="sr-only">Follow us on GitHub</span><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-700 transition group-hover:fill-zinc-900 dark:group-hover:fill-zinc-500"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 1.667c-4.605 0-8.334 3.823-8.334 8.544 0 3.78 2.385 6.974 5.698 8.106.417.075.573-.182.573-.406 0-.203-.011-.875-.011-1.592-2.093.397-2.635-.522-2.802-1.002-.094-.246-.5-1.005-.854-1.207-.291-.16-.708-.556-.01-.567.656-.01 1.124.62 1.281.876.75 1.292 1.948.93 2.427.705.073-.555.291-.93.531-1.143-1.854-.213-3.791-.95-3.791-4.218 0-.929.322-1.698.854-2.296-.083-.214-.375-1.09.083-2.265 0 0 .698-.224 2.292.876a7.576 7.576 0 0 1 2.083-.288c.709 0 1.417.096 2.084.288 1.593-1.11 2.291-.875 2.291-.875.459 1.174.167 2.05.084 2.263.53.599.854 1.357.854 2.297 0 3.278-1.948 4.005-3.802 4.219.302.266.563.78.563 1.58 0 1.143-.011 2.061-.011 2.35 0 .224.156.491.573.405a8.365 8.365 0 0 0 4.11-3.116 8.707 8.707 0 0 0 1.567-4.99c0-4.721-3.73-8.545-8.334-8.545Z"></path></svg></a><a class="group" href="/ensip/10#"><span class="sr-only">Join our Discord server</span><svg viewBox="0 0 20 20" aria-hidden="true" class="h-5 w-5 fill-zinc-700 transition group-hover:fill-zinc-900 dark:group-hover:fill-zinc-500"><path d="M16.238 4.515a14.842 14.842 0 0 0-3.664-1.136.055.055 0 0 0-.059.027 10.35 10.35 0 0 0-.456.938 13.702 13.702 0 0 0-4.115 0 9.479 9.479 0 0 0-.464-.938.058.058 0 0 0-.058-.027c-1.266.218-2.497.6-3.664 1.136a.052.052 0 0 0-.024.02C1.4 8.023.76 11.424 1.074 14.782a.062.062 0 0 0 .024.042 14.923 14.923 0 0 0 4.494 2.272.058.058 0 0 0 .064-.02c.346-.473.654-.972.92-1.496a.057.057 0 0 0-.032-.08 9.83 9.83 0 0 1-1.404-.669.058.058 0 0 1-.029-.046.058.058 0 0 1 .023-.05c.094-.07.189-.144.279-.218a.056.056 0 0 1 .058-.008c2.946 1.345 6.135 1.345 9.046 0a.056.056 0 0 1 .059.007c.09.074.184.149.28.22a.058.058 0 0 1 .023.049.059.059 0 0 1-.028.046 9.224 9.224 0 0 1-1.405.669.058.058 0 0 0-.033.033.056.056 0 0 0 .002.047c.27.523.58 1.022.92 1.495a.056.056 0 0 0 .062.021 14.878 14.878 0 0 0 4.502-2.272.055.055 0 0 0 .016-.018.056.056 0 0 0 .008-.023c.375-3.883-.63-7.256-2.662-10.246a.046.046 0 0 0-.023-.021Zm-9.223 8.221c-.887 0-1.618-.814-1.618-1.814s.717-1.814 1.618-1.814c.908 0 1.632.821 1.618 1.814 0 1-.717 1.814-1.618 1.814Zm5.981 0c-.887 0-1.618-.814-1.618-1.814s.717-1.814 1.618-1.814c.908 0 1.632.821 1.618 1.814 0 1-.71 1.814-1.618 1.814Z"></path></svg></a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"description":"Provides a mechanism to support wildcard resolution of ENS names (formerly EIP-2544).","sections":[{"title":"Abstract","navtitle":"","id":"abstract"},{"title":"Motivation","navtitle":"","id":"motivation"},{"title":"Specification","navtitle":"","id":"specification"},{"title":"Rationale","navtitle":"","id":"rationale"},{"title":"Backwards Compatibility","navtitle":"","id":"backwards-compatibility"},{"title":"Security Considerations","navtitle":"","id":"security-considerations"},{"title":"Copyright","navtitle":"","id":"copyright"}],"title":"ENSIP-10: Wildcard Resolution"},"__N_SSG":true},"page":"/ensip/10","query":{},"buildId":"syAM8c0Bjlk2yoKNrunzk","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>